(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1010:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(49),s=n.n(c),i=n(16),o=n(162),l=n(508),u=n(12),d=n(509),j=n(423),b=n(510),p=n(9),f=n(21),O=n(166),m=n(266),h=n(560),x=n(346),y=n(43),v=n(257),g=n(256),T=n(258),w=n(151),D=n(1035),_=n(1036),I=n(1037),k=n(1038),E=n(1039),C=n(363),A=n(1040),S=n(1041),R=n(1042),P=n(552),L=n(129),N=n(74),F=n(557),Y=n(1032),H=n(561),M=n(48),q=n(189),z=n(422),V=n(562),U=n(30),G=n(10),B=n.n(G),K=n(23),W=n(511),J=n.n(W).a.create({baseURL:"http://localhost:5000"});J.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var Q=function(e){return J.get("/leaves/".concat(e))},$=function(e){return J.post("/leaves/range",e)},X=function(e){return J.post("/leaves/range/personal",e)},Z=function(e,t){return J.patch("/leaves/".concat(e),t)},ee=function(e,t,n){return J.get("/leaves/".concat(e,"/").concat(t,"/").concat(n))},te=function(e){return J.get("/leaves/upcoming/".concat(e))},ne=function(e){return J.get("/leaves/history/".concat(e))},ae=function(e){return J.post("/users/signIn",e)},re=function(e){return J.post("/users/resetPassword",e)},ce=function(e,t){return J.post("/users/".concat(e,"/changePassword"),t)},se=function(e,t){return J.post("/users/updateSettings/".concat(e),t)},ie=function(e){return J.get("depts/".concat(e))},oe=function(e,t){return J.post("/depts/".concat(e),t)},le=function(e){return J.post("/users",e)},ue=function(e){return J.get("users/".concat(e))},de=function(e,t){return J.patch("/users/".concat(e),t)},je=function(e){return J.get("users/dept/".concat(e))},be=function(e){return J.post("/leaveTypes",e)},pe=function(e){return J.get("/leaveTypes/".concat(e))},fe=function(e,t){return J.patch("/leaveTypes/".concat(e),t)},Oe=function(e){return J.get("/roles/".concat(e))},me=function(e,t){return J.patch("/roles/".concat(e),t)},he=function(e){return J.get("/holidays/".concat(e))},xe=function(e){return J.post("/holidays",e)},ye=function(e,t,n){return J.post("/holidays/".concat(e,"/").concat(t),n)},ve=function(e,t){return J.get("/holidays/".concat(e,"/").concat(t))},ge=function(e,t){return J.delete("/holidays/".concat(e,"/").concat(t))},Te=function(e){return J.get("/training/".concat(e))},we=function(e,t){return J.post("/training/".concat(e),t)},De=function(e,t){return J.patch("/training/".concat(e),t)},_e=function(e,t,n){return J.get("/training/ext/".concat(e,"/").concat(t,"/").concat(n))},Ie=function(e,t){return J.post("/training/ext/".concat(e),t)},ke=function(e){return J.get("/training/history/ext/".concat(e))},Ee=function(e){return J.get("/training/history/".concat(e))},Ce=function(e){return J.get("/training/upcoming/".concat(e))},Ae=function(e){return J.get("/policy/dept/".concat(e))},Se=function(e){return J.get("/policy/".concat(e))},Re=function(e,t){return J.patch("/policy/".concat(e),t)},Pe=function(e){return J.get("/notification/".concat(e))},Le=function(e,t){return J.post("/notification/".concat(e),t)},Ne=function(e){return J.post("/notification/read/".concat(e))},Fe=function(e){return J.get("trainingProgress/".concat(e))},Ye=function(e,t){return J.post("/trainingProgress/".concat(e),t)},He=function(e){return J.get("trainingProgress/user/".concat(e))},Me=function(e){return J.get("trainingProgress/dept/".concat(e))},qe="CREATE_LEAVE",ze="UPDATE_LEAVE",Ve="FETCH_ALL_LEAVE",Ue="FETCH_ONE_LEAVE",Ge="FETCH_LEAVE_BY_DATERANGE_PERSONAL",Be="FETCH_LEAVE_BY_DATERANGE",Ke="LEAVE_START_LOADING",We="LEAVE_END_LOADING",Je="LEAVE_ERROR",Qe="LEAVE_SUCCESS",$e="FETCH_LEAVE_REQUESTS",Xe="FETCH_UPCOMING_LEAVE",Ze="FETCH_LEAVE_HISTORY",et="FETCH_TODAY_LEAVE",tt="AUTH",nt="RESET_PASSWORD",at="CHANGE_PASSWORD",rt="UPDATE_AUTH",ct="UPDATE_SETTINGS",st="LOGOUT",it="AUTH_START_LOADING",ot="AUTH_END_LOADING",lt="AUTH_ERROR",ut="AUTH_SUCCESS",dt="CREATE_USER",jt="UPDATE_USER",bt="FETCH_ALL_USER",pt="FETCH_ONE_USER",ft="USER_START_LOADING",Ot="USER_END_LOADING",mt="USER_ERROR",ht="USER_SUCCESS",xt="FETCH_DEPT_USER",yt="CREATE_DEPT",vt="UPDATE_DEPT",gt="DELETE_DEPT",Tt="FETCH_ALL_DEPT",wt="DEPT_START_LOADING",Dt="DEPT_END_LOADING",_t="DEPT_ERROR",It="DEPT_SUCCESS",kt="CREATE_LEAVETYPE",Et="UPDATE_LEAVETYPE",Ct="FETCH_ALL_LEAVETYPE",At="FETCH_ONE_LEAVETYPE",St="LEAVETYPE_START_LOADING",Rt="LEAVETYPE_END_LOADING",Pt="LEAVE_ERROR",Lt="FETCH_LEAVE_COUNT",Nt="LEAVE_SUCCESS",Ft="CREATE_ROLE",Yt="UPDATE_ROLE",Ht="FETCH_ALL_ROLE",Mt="FETCH_ONE_ROLE",qt="ROLE_START_LOADING",zt="ROLE_END_LOADING",Vt="ROLE_ERROR",Ut="ROLE_SUCCESS",Gt="CREATE_HOLIDAY",Bt="UPDATE_HOLIDAY",Kt="DELETE_HOLIDAY",Wt="FETCH_ALL_HOLIDAY",Jt="FETCH_ONE_HOLIDAY",Qt="HOLIDAY_START_LOADING",$t="HOLIDAY_END_LOADING",Xt="HOLIDAY_ERROR",Zt="HOLIDAY_SUCCESS",en="FETCH_HOLIDAY_BY_YEAR",tn="CREATE_TRAINING",nn="FETCH_ALL_TRAINING",an="FETCH_ONE_TRAINING",rn="TRAINING_START_LOADING",cn="TRAINING_END_LOADING",sn="TRAINING_ERROR",on="TRAINING_SUCCESS",ln="UPDATE_TRAINING",un="LEAVE_TRAINING",dn="FETCH_EXT_TRAINING",jn="UPDATE_TRAINING_STATUS",bn="FETCH_EXT_TRAINING_HISTORY",pn="FETCH_TRAINING_HISTORY",fn="FETCH_UPCOMING_TRAINING",On="FETCH_TODAY_TRAINING",mn="FETCH_TRAINING_COUNT",hn="CREATE_TRAININGPROGRESS",xn="FETCH_ALL_TRAININGPROGRESS",yn="FETCH_ONE_TRAININGPROGRESS",vn="TRAININGPROGRESS_START_LOADING",gn="TRAININGPROGRESS_END_LOADING",Tn="TRAININGPROGRESS_ERROR",wn="TRAININGPROGRESS_SUCCESS",Dn="UPDATE_TRAININGPROGRESS",_n="LEAVE_TRAININGPROGRESS",In="FETCH_DEPT_TRAININGPROGRESS",kn="FETCH_USER_TRAININGPROGRESS",En="FETCH_EXT_TRAININGPROGRESS",Cn="UPDATE_TRAININGPROGRESS_STATUS",An="FETCH_EXT_TRAININGPROGRESS_HISTORY",Sn="FETCH_TRAININGPROGRESS_HISTORY",Rn="FETCH_UPCOMING_TRAININGPROGRESS",Pn="FETCH_TODAY_TRAININGPROGRESS",Ln="CREATE_POLICY",Nn="UPDATE_POLICY",Fn="FETCH_ALL_POLICY",Yn="FETCH_POLICY_BY_DEPT",Hn="FETCH_ONE_POLICY",Mn="POLICY_START_LOADING",qn="POLICY_END_LOADING",zn="POLICY_ERROR",Vn="POLICY_SUCCESS",Un="NOTIFICATION_START_LOADING",Gn="NOTIFICATION_END_LOADING",Bn="NOTIFICATION_ERROR",Kn="NOTIFICATION_SUCCESS",Wn="FETCH_ALL_NOTIFICATION",Jn="CLEAR_NOTIFICATION_BY_TYPE",Qn="SET_NOTIFICATION_READ",$n=function(){return function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Ke}),e.next=4,J.get("/leaves");case 4:n=e.sent,a=n.data,t({type:Ve,payload:a}),t({type:We}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:Je,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},Xn=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Ke}),t.next=4,Q(e);case 4:return a=t.sent,r=a.data,n({type:Ue,payload:r}),n({type:We}),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(0),n({type:Je,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Zn=function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:Ke}),n.next=4,Z(e,t);case 4:r=n.sent,c=r.data,a({type:ze,payload:c}),a({type:We}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:Je,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},ea=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Ke}),t.next=4,$(e);case 4:a=t.sent,n({type:Be,payload:a}),n({type:We}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:Je,error:t.t0});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ta=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Ke}),t.next=4,X(e);case 4:a=t.sent,n({type:Ge,payload:a}),n({type:We}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:Je,error:t.t0});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},na=function(e,t,n){return function(){var a=Object(K.a)(B.a.mark((function a(r){var c,s;return B.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:Ke}),a.next=4,ee(e,t,n);case 4:c=a.sent,s=c.data,r({type:$e,payload:s}),r({type:We}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),r({type:Je,error:a.t0});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},aa=function(){return function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Ke}),e.next=4,J.get("/leaves/date/today");case 4:n=e.sent,a=n.data,t({type:et,payload:a}),t({type:We}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:Je,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},ra=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:rn}),t.next=4,c=e,J.post("/training",c);case 4:a=t.sent,r=a.data,n({type:tn,payload:r}),n({type:cn}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:sn,error:t.t0});case 13:case"end":return t.stop()}var c}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},ca=function(e,t,n){return function(){var a=Object(K.a)(B.a.mark((function a(r){var c,s;return B.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:rn}),a.next=4,_e(e,t,n);case 4:c=a.sent,s=c.data,r({type:dn,payload:s}),r({type:cn}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),r({type:sn,error:a.t0});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},sa=function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:rn}),n.next=4,Ie(e,t);case 4:r=n.sent,c=r.data,a({type:jn,payload:c}),a({type:cn}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:sn,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},ia=function(){return function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:St}),e.next=4,J.get("/leaveTypes");case 4:n=e.sent,a=n.data,t({type:Ct,payload:a}),t({type:Rt}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:Pt,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},oa=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:St}),t.next=4,be(e);case 4:a=t.sent,r=a.data,n({type:kt,payload:r}),n({type:Nt,payload:{success:"Leave type successfully created"}}),n({type:Rt}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:Pt,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},la=function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:St}),n.next=4,fe(e,t);case 4:r=n.sent,c=r.data,a({type:Et,payload:c}),a({type:Rt}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:Pt,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},ua=n(11),da=n.n(ua),ja=n(1017),ba=n(1018),pa=n(525),fa=n(332),Oa=n(334),ma=n(333),ha=n(291),xa=n(1033),ya=n(527),va=n(286),ga=(n(645),n(72)),Ta=n(1),wa=function(e){var t=e.props;return Object(Ta.jsx)("div",{style:{paddingTop:100,paddingBottom:100,textAlign:"center"},className:"antdp-page-loading",children:Object(Ta.jsx)(ga.a,Object(p.a)({size:"large",tip:"Loading..."},t))})},Da=n(90),_a=n.n(Da),Ia=function(e){var t=e.user,n=_a()(),r=Object(i.c)((function(e){return e.leaves})),c=r.leaves,s=r.isLoading,o=r.todayLeaves,l=Object(i.c)((function(e){return e.trainings})).trainings,u=(Object(i.c)((function(e){return e.leaveTypes})).leaveTypes,Object(i.b)());Object(a.useEffect)((function(){u($n()),u(aa()),u(function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:rn}),e.next=4,J.get("/training/date/today");case 4:n=e.sent,a=n.data,t({type:On,payload:a}),t({type:cn}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:sn,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),u(ia())}),[u]);var d=[];t.leaveCount.forEach((function(e){var t={name:e.leaveType.name,value:e.count};d.push(t)}));var j=t.trainingHours,b=t.completedHours,p=j-b,f=b/j,O=[{name:"Hours Completed",value:b},{name:"Hours Required",value:p=p<0?"":p}],m=["#0088FE","#2ce654","#ff00f0"],h=["#0088FE","#de0b0b"];return!s&&c&&o&&l?Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,children:"Personal Dashboard"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,lg:16,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsxs)(Y.b,{title:"Profile Details",bordered:!0,column:{sm:2,xs:1},layout:n.md?"horizontal":"vertical",children:[Object(Ta.jsx)(Y.b.Item,{label:"Name",span:3,children:"".concat(t.first_name," ").concat(t.last_name)}),Object(Ta.jsx)(Y.b.Item,{label:"Department",span:2,children:t.department.name}),t.leaveCount.map((function(e,t){return Object(Ta.jsx)(Y.b.Item,{label:e.leaveType.name,span:2,children:e.count},e.leaveType._id)})),Object(Ta.jsx)(Y.b.Item,{label:"Total Training Hours Required",span:1,children:j}),Object(Ta.jsx)(Y.b.Item,{label:"Training Hours Completed",span:1,children:b})]}),Object(Ta.jsx)("br",{}),!!o.some((function(e){return e.user._id===t._id}))&&Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(H.a,{message:"You are on leave today.",type:"info",showIcon:!0}),Object(Ta.jsx)("br",{})]}),f<=.25?Object(Ta.jsx)(H.a,{message:"Low Training Hours Completed",description:"Please participate in more trainings in order to reach your quota!",type:"error"}):f<.75?Object(Ta.jsx)(H.a,{message:"Moderate Training Hours Completed",description:"Keep up the good work! Participate in more trainings to reach your quota.",type:"warning"}):f<1?Object(Ta.jsx)(H.a,{message:"Great Training Hours Completed",description:"Almost there! Keep participating in trainings to reach your quota!",type:"success"}):Object(Ta.jsx)(H.a,{message:"Training Quota Reached",description:"Congratulations! You have reached your training quota!",type:"success"})]})}),Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,lg:8,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsx)("h4",{children:"Your Leaves Remaining"}),Object(Ta.jsx)(ja.a,{minHeight:180,children:Object(Ta.jsxs)(ba.a,{data:d,margin:{top:5,right:30,left:20,bottom:5},children:[Object(Ta.jsx)(pa.a,{fill:"#0088FE",dataKey:"value",children:d.map((function(e,t){return Object(Ta.jsx)(fa.a,{fill:m[t%m.length]},"cell-".concat(t))}))}),Object(Ta.jsx)(Oa.a,{}),Object(Ta.jsx)(ma.a,{dataKey:"name"}),Object(Ta.jsx)(ha.a,{})]})}),Object(Ta.jsx)("h4",{children:"Your Training Hours"}),Object(Ta.jsx)(ja.a,{minWidth:200,minHeight:210,children:Object(Ta.jsxs)(xa.a,{children:[Object(Ta.jsx)(ya.a,{data:O,innerRadius:40,outerRadius:60,fill:"#8884d8",paddingAngle:3,startAngle:-270,dataKey:"value",isAnimationActive:!1,label:function(e){var t=e.x,n=e.y,a=e.value;return Object(Ta.jsx)("text",{x:t,y:n,fill:"black",textAnchor:"end",alignmentBaseline:"auto",children:a})},labelLine:!1,children:O.map((function(e,t){return Object(Ta.jsx)(fa.a,{fill:h[t%h.length]},"cell-".concat(t))}))}),Object(Ta.jsx)(ha.a,{}),Object(Ta.jsx)(va.a,{})]})})]})})]}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)(P.a.Title,{level:2,children:"Today's Information"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsx)("div",{style:{textAlign:"right"},children:Object(Ta.jsx)(M.a,{type:"primary",shape:"round",children:Object(Ta.jsx)(U.b,{to:"/leaves/home",children:"Leaves Dashboard"})})}),Object(Ta.jsx)("b",{children:"Currently on Leave:"}),o&&(o.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:o,rowKey:"_id",children:[Object(Ta.jsx)(z.a.Column,{title:"Name",dataIndex:"name",render:function(e,t){return"".concat(t.user.first_name," ").concat(t.user.last_name)}}),Object(Ta.jsx)(z.a.Column,{title:"Leave Type",dataIndex:"leaveType",render:function(e,t){return Object(Ta.jsx)(V.a,{color:e.color,children:(n=e.code,n.charAt(0).toUpperCase()+n.slice(1))});var n}},"leaveType"),Object(Ta.jsx)(z.a.Column,{title:"Date",dataIndex:"date",render:function(e,t){return"".concat(da()(t.fromDate).format("YYYY-MM-DD")," - ").concat(da()(t.toDate).format("YYYY-MM-DD"))}},"date")]})}):Object(Ta.jsx)(q.a,{}))]})}),Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsx)("div",{style:{textAlign:"right"},children:Object(Ta.jsx)(M.a,{type:"primary",shape:"round",children:Object(Ta.jsx)(U.b,{to:"/training/home",children:"Training Dashboard"})})}),Object(Ta.jsx)("b",{children:"Internal Trainings Today:"}),l&&(l.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:l,rowKey:"_id",children:[Object(Ta.jsx)(z.a.Column,{title:"Organizer",dataIndex:"organizer"},"organizer"),Object(Ta.jsx)(z.a.Column,{title:"Tite",dataIndex:"title"},"title"),Object(Ta.jsx)(z.a.Column,{title:"Action",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(U.b,{to:"/training/view/".concat(t._id),children:"View"})},t._id)}},"action")]})}):Object(Ta.jsx)(q.a,{}))]})})]})]}):Object(Ta.jsx)(wa,{})},ka=n(63),Ea=n(59),Ca=(n(764),n(177)),Aa=(P.a.Text,function(){var e=_a()(),t=Object(a.useState)(!0),n=Object(f.a)(t,2),r=(n[0],n[1],Object(i.c)((function(e){return e.leaves}))),c=r.leaves,s=r.upcomingLeave,o=r.isLoading,l=(Object(i.c)((function(e){return e.leaveTypes})).leaveTypes,JSON.parse(localStorage.getItem("profile")).result),u=(Object(Ea.g)(),Object(i.b)()),d=0,j=[];l.leaveCount.forEach((function(e){var t={name:e.leaveType.name,value:e.count};j.push(t)}));var b=["#0088FE","#2ce654","#ff00f0"];Object(a.useEffect)((function(){var e;u((e=l._id,function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Ke}),t.next=4,te(e);case 4:a=t.sent,r=a.data,n({type:Xe,payload:r}),n({type:We}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:Je,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}())),u(ia()),"staff"!=l.roles.name&&u(na(l.roles.name,l._id,l.department.name))}),[u]);var p,O=Object(ka.a)(c);try{for(O.s();!(p=O.n()).done;){"Pending"==p.value.status&&d++}}catch(m){O.e(m)}finally{O.f()}return o?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,children:"Current Leave Status"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,md:12,lg:16,children:Object(Ta.jsx)(F.a,{bordered:!0,children:Object(Ta.jsxs)(Y.b,{title:"Profile Details",bordered:!0,column:{sm:2,xs:1},layout:e.md?"horizontal":"vertical",children:[Object(Ta.jsx)(Y.b.Item,{label:"Name",span:2,children:"".concat(l.first_name," ").concat(l.last_name)}),Object(Ta.jsx)(Y.b.Item,{label:"Department",span:2,children:l.department.name}),l.leaveCount.map((function(e,t){return Object(Ta.jsx)(Y.b.Item,{label:e.leaveType.name,span:1,children:e.count},e.leaveType._id)}))]})})}),Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,md:12,lg:8,children:Object(Ta.jsx)(F.a,{bordered:!0,children:Object(Ta.jsx)(ja.a,{minHeight:215,children:Object(Ta.jsxs)(ba.a,{data:j,margin:{top:5,right:30,left:20,bottom:5},children:[Object(Ta.jsx)(pa.a,{fill:"#0088FE",dataKey:"value",children:j.map((function(e,t){return Object(Ta.jsx)(fa.a,{fill:b[t%b.length]},"cell-".concat(t))}))}),Object(Ta.jsx)(Oa.a,{}),Object(Ta.jsx)(ma.a,{dataKey:"name"}),Object(Ta.jsx)(ha.a,{})]})})})})]}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)(P.a.Title,{level:2,children:"Quick Overview"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsxs)("div",{style:{textAlign:"right"},children:[Object(Ta.jsx)(M.a,{type:"primary",shape:"round",style:{margin:"10px"},children:Object(Ta.jsx)(U.b,{to:"/leaves/create",children:"To Leave Application"})}),Object(Ta.jsx)(M.a,{type:"primary",shape:"round",style:{margin:"10px"},children:Object(Ta.jsx)(U.b,{to:"/leaves/history",children:"To Leave History"})})]}),Object(Ta.jsx)("b",{children:"Upcoming Leaves:"}),s&&(s.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:s,rowKey:"_id",children:[Object(Ta.jsx)(z.a.Column,{title:"Leave Type",dataIndex:"leaveType",render:function(e,t){return Object(Ta.jsx)(V.a,{color:e.color,children:(n=e.code,n.charAt(0).toUpperCase()+n.slice(1))});var n}},"leaveType"),Object(Ta.jsx)(z.a.Column,{title:"Reason",dataIndex:"reason"},"reason"),Object(Ta.jsx)(z.a.Column,{title:"Date",dataIndex:"date",render:function(e,t){return"".concat(da()(t.fromDate).format("YYYY-MM-DD")," - ").concat(da()(t.toDate).format("YYYY-MM-DD"))}},"date")]})}):Object(Ta.jsx)(q.a,{})),Object(Ta.jsx)("br",{})]})}),"staff"!=l.roles.name&&Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsx)(F.a,{bordered:!0,children:Object(Ta.jsxs)(y.b,{wrap:!0,align:"baseline",style:{display:"flex",justifyContent:"space-between"},children:[Object(Ta.jsxs)(P.a.Text,{children:["Pending Leave Requests:"," ".concat(d)]}),Object(Ta.jsx)(M.a,{type:"primary",shape:"round",children:Object(Ta.jsx)(U.b,{to:"/leaves/list",children:"To Requests"})})]})})})]})]})}),Sa={route:{path:"/",routes:[{path:"/home",name:"Personal Dashboard",icon:Object(Ta.jsx)(D.a,{}),exact:!0},{path:"/leaves",name:"Leaves",icon:Object(Ta.jsx)(_.a,{}),exact:!0,routes:[{path:"home",name:"Leaves Dashboard",icon:Object(Ta.jsx)(I.a,{}),exact:!0},{path:"create",name:"Apply Leave",icon:Object(Ta.jsx)(k.a,{})},{path:"history",name:"Leave History",icon:Object(Ta.jsx)(E.a,{})},{path:"/calendar/personal",name:"Calendar View",icon:Object(Ta.jsx)(C.a,{})}]},{path:"/training",name:"Training",icon:Object(Ta.jsx)(A.a,{}),routes:[{path:"home",name:"Training Dashboard",icon:Object(Ta.jsx)(I.a,{}),exact:!0},{path:"list",name:"Internal Training List",icon:Object(Ta.jsx)(S.a,{})},{path:"history",name:"Training History",icon:Object(Ta.jsx)(E.a,{})},{path:"/training/submitExt",name:"External Training Request",icon:Object(Ta.jsx)(R.a,{})}]}]},location:{pathname:"/"}},Ra=n(1043),Pa=n(1044),La=n(223),Na=n(1045),Fa={route:{path:"/",routes:[{path:"/",name:"Dashboard",icon:Object(Ta.jsx)(Ra.a,{}),routes:[{path:"/home",name:"Personal",icon:Object(Ta.jsx)(D.a,{}),exact:!0},{path:"/supervisor",name:"Department",icon:Object(Ta.jsx)(Pa.a,{}),exact:!0}]},{path:"/leaves",name:"Leaves",icon:Object(Ta.jsx)(_.a,{}),exact:!0,routes:[{path:"home",name:"Leaves Dashboard",icon:Object(Ta.jsx)(I.a,{}),exact:!0},{path:"create",name:"Apply Leave",icon:Object(Ta.jsx)(k.a,{})},{path:"history",name:"Leave History",icon:Object(Ta.jsx)(E.a,{})},{path:"list",name:"Leave Requests",icon:Object(Ta.jsx)(La.a,{})},{path:"/calendar/personal",name:"Calendar View",icon:Object(Ta.jsx)(C.a,{})}]},{path:"/training",name:"Training",icon:Object(Ta.jsx)(A.a,{}),routes:[{path:"home",name:"Training Dashboard",icon:Object(Ta.jsx)(I.a,{}),exact:!0},{path:"list",name:"Internal Training List",icon:Object(Ta.jsx)(S.a,{})},{path:"history",name:"Training History",icon:Object(Ta.jsx)(E.a,{})},{path:"submitExt",name:"External Training Request",icon:Object(Ta.jsx)(R.a,{})},{path:"extList",name:"External Requests List",icon:Object(Ta.jsx)(La.a,{})},{path:"/trainingProgress/history",name:"Track Training Progress",icon:Object(Ta.jsx)(La.a,{})},{path:"/trainingProgress/list",name:"Pending Training Completion",icon:Object(Ta.jsx)(La.a,{})}]},{path:"/users/dept",name:"Employee",icon:Object(Ta.jsx)(Na.a,{})}]},location:{pathname:"/"}},Ya=n(1046),Ha=n(1047),Ma=n(1048),qa={route:{path:"/",routes:[{path:"/dashboard",name:"Dashboard",icon:Object(Ta.jsx)(Ra.a,{}),routes:[{path:"/home",name:"Personal",icon:Object(Ta.jsx)(D.a,{}),exact:!0},{path:"/supervisor",name:"Department",icon:Object(Ta.jsx)(Pa.a,{}),exact:!0},{path:"/admin",name:"Admin",icon:Object(Ta.jsx)(Ya.a,{}),exact:!0}]},{path:"/calendar",name:"Calendar",icon:Object(Ta.jsx)(C.a,{}),exact:!0},{path:"/leaves",name:"Leaves",icon:Object(Ta.jsx)(_.a,{}),exact:!0,routes:[{path:"home",name:"Leaves Dashboard",icon:Object(Ta.jsx)(I.a,{}),exact:!0},{path:"create",name:"Apply Leave",icon:Object(Ta.jsx)(k.a,{})},{path:"history",name:"Leave History",icon:Object(Ta.jsx)(E.a,{})},{path:"list",name:"Leave Requests",icon:Object(Ta.jsx)(La.a,{})},{path:"/calendar/personal",name:"Calendar View",icon:Object(Ta.jsx)(C.a,{})}]},{path:"/training",name:"Training",icon:Object(Ta.jsx)(A.a,{}),routes:[{path:"home",name:"Training Dashboard",icon:Object(Ta.jsx)(I.a,{}),exact:!0},{path:"create",name:"Create Internal Training",icon:Object(Ta.jsx)(k.a,{})},{path:"list",name:"Internal Training List",icon:Object(Ta.jsx)(S.a,{})},{path:"history",name:"Training History",icon:Object(Ta.jsx)(E.a,{})},{path:"submitExt",name:"External Training Request",icon:Object(Ta.jsx)(R.a,{})},{path:"extList",name:"External Requests List",icon:Object(Ta.jsx)(La.a,{})},{path:"/trainingProgress/history",name:"Track Training Progress",icon:Object(Ta.jsx)(La.a,{})},{path:"/trainingProgress/list",name:"Pending Training Completion",icon:Object(Ta.jsx)(La.a,{})}]},{path:"/settings",name:"Settings",icon:Object(Ta.jsx)(Ha.a,{}),routes:[{path:"/holidays",name:"Holidays",icon:Object(Ta.jsx)(C.a,{})},{path:"/depts",name:"Departments",icon:Object(Ta.jsx)(Ma.a,{})},{path:"/leaveTypes",name:"Leave Types",icon:Object(Ta.jsx)(Ma.a,{})},{path:"/policy",name:"Policy",icon:Object(Ta.jsx)(Ma.a,{})}]},{path:"/users",name:"Employee",icon:Object(Ta.jsx)(Na.a,{})}]},location:{pathname:"/"}},za=n(1049),Va=n(128),Ua=n(75),Ga=n(32),Ba=n(4),Ka=n.n(Ba),Wa=n(106),Ja=n(1034),Qa=n(254),$a=(n(765),function(e){var t=e.list,n=void 0===t?[]:t,a=e.onClick,r=e.onClear,c=e.title,s=e.onViewMore,i=e.emptyText,o=e.showClear,l=void 0===o||o,u=e.clearText,d=e.viewMoreText,j=e.showViewMore,b=void 0!==j&&j;return n&&0!==n.length?Object(Ta.jsxs)("div",{children:[Object(Ta.jsx)(Ja.b,{className:"list",dataSource:n,renderItem:function(e,t){var n=Ka()("item",Object(Wa.a)({},"read",e.read)),r=e.avatar?"string"===typeof e.avatar?Object(Ta.jsx)(Qa.a,{className:"avatar",src:e.avatar}):Object(Ta.jsx)("span",{className:"iconElement",children:e.avatar}):null;return Object(Ta.jsx)(Ja.b.Item,{className:n,onClick:function(){null===a||void 0===a||a(e)},children:Object(Ta.jsx)(Ja.b.Item.Meta,{className:"meta",avatar:r,title:Object(Ta.jsxs)("div",{className:"title",children:[e.title,Object(Ta.jsx)("div",{className:"extra",children:e.extra})]}),description:Object(Ta.jsxs)("div",{children:[Object(Ta.jsx)("div",{className:"description",children:"".concat(e.sender.first_name," ").concat(e.sender.last_name," ").concat(e.content.message)}),Object(Ta.jsx)("div",{className:"datetime",children:e.createdAt})]})})},e.key||t)}}),Object(Ta.jsxs)("div",{className:"bottomBar",children:[l?Object(Ta.jsxs)("div",{onClick:r,children:[u," ",c]}):null,b?Object(Ta.jsx)("div",{onClick:function(e){s&&s(e)},children:d}):null]})]}):Object(Ta.jsxs)("div",{className:"notFound",children:[Object(Ta.jsx)("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/sAuJeJzSKbUmHfBQRzmZ.svg",alt:"not found"}),Object(Ta.jsx)("div",{children:i})]})}),Xa=n(563),Za=n(120),er=(n(766),["overlayClassName"]),tr=function(e){var t=e.overlayClassName,n=Object(Xa.a)(e,er);return Object(Ta.jsx)(Za.a,Object(p.a)(Object(p.a)({overlayClassName:"container ".concat(t)},n),{},{trigger:["click"]}))},nr=(n(477),Va.a.TabPane),ar=function(e){var t=e.className,n=e.count,a=e.bell,c=Object(Ga.a)(!1,{value:e.popupVisible,onChange:e.onPopupVisibleChange}),s=Object(f.a)(c,2),i=s[0],o=s[1],l=Ka()(t,"noticeButton"),u=function(){var t=e.children,n=e.loading,a=e.onClear,c=e.onTabChange,s=e.onItemClick,i=e.onViewMore,o=e.clearText,l=e.viewMoreText;if(!t)return null;var u=[];return r.a.Children.forEach(t,(function(e){if(e){var t=e.props,n=t.list,r=t.title,c=t.count,d=t.tabKey,j=t.showClear,b=t.showViewMore,p=n&&n.length?n.length:0,f=c||0===c?c:p,O=f>0?"".concat(r," (").concat(f,")"):r;u.push(Object(Ta.jsx)(nr,{tab:O,children:Object(Ta.jsx)($a,{clearText:o,viewMoreText:l,list:n,tabKey:d,onClear:function(){return a&&a(r,d)},onClick:function(t){return s&&s(t,e.props)},onViewMore:function(t){return i&&i(e.props,t)},showClear:j,showViewMore:b,title:r})},d))}})),Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(ga.a,{spinning:n,delay:300,children:Object(Ta.jsx)(Va.a,{className:"tabs",onChange:c,centered:!0,children:u})})})}(),d=a||Object(Ta.jsx)(za.a,{className:"icon"}),j=Object(Ta.jsx)("span",{className:Ka()(l,{opened:i}),children:Object(Ta.jsx)(Ua.a,{count:n,style:{boxShadow:"none"},className:"badge",children:d})});return u?Object(Ta.jsx)(tr,{placement:"bottomRight",overlay:u,overlayClassName:"popover",trigger:["click"],visible:i,onVisibleChange:o,children:j}):j};ar.defaultProps={emptyImage:"https://gw.alipayobjects.com/zos/rmsportal/wAhyIChODzsoKIOBHcBk.svg"},ar.Tab=$a;var rr=ar,cr=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Un}),t.next=4,Pe(e);case 4:return a=t.sent,r=a.data,n({type:Wn,payload:r}),n({type:Gn}),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(0),n({type:Bn,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},sr=function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:Un}),n.next=4,Le(e,t);case 4:return r=n.sent,r.data,a({type:Jn,payload:t}),a({type:Gn}),n.abrupt("return",!0);case 11:return n.prev=11,n.t0=n.catch(0),a({type:Bn,error:n.t0}),n.abrupt("return",!1);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},ir=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Un}),t.next=4,Ne(e);case 4:return a=t.sent,r=a.data,n({type:Qn,payload:r}),n({type:Gn}),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(0),n({type:Bn,error:t.t0}),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},or=function(e){var t=e.user,n=e.socket,r=Object(i.b)(),c=Object(Ea.f)(),s=Object(Ea.g)(),o=Object(a.useState)({key:Math.random()}),l=Object(f.a)(o,2),u=(l[0],l[1],Object(i.c)((function(e){return e.notifications}))),d=u.notifications,j=u.isLoading,b=Object(a.useState)(d),O=Object(f.a)(b,2),h=O[0],x=O[1],y=function(e){if(!e||0===e.length||!Array.isArray(e))return{};var t=e.map((function(e){var t=Object(p.a)({},e);if(t.createdAt&&(t.createdAt=da()(e.createdAt).fromNow()),t._id&&(t.key=t._id),t.content.status){var n={Pending:"blue",Rejected:"red",Approved:"green","Waiting Completion":"blue","Pending Approval":"blue"}[t.content.status];t.extra=Object(Ta.jsx)(V.a,{color:n,style:{marginRight:0},children:t.content.status})}return t}));return Object(Ca.groupBy)(t,"content.type")}(h),v=function(e){var t={};return Object.keys(e).forEach((function(n){var a=e[n];t[n]||(t[n]=0),Array.isArray(a)&&(t[n]=a.filter((function(e){return!e.read})).length)})),t}(y||{}),g=function(e){var t=0;for(var n in e)t+=e[n];return t}(v);Object(a.useEffect)((function(){t&&r(cr(t._id)).then((function(e){x(e)}))}),[t,c]),Object(a.useEffect)((function(){t&&(null===n||void 0===n||n.on("newNotification",(function(){r(cr(t._id)).then((function(e){x(e)}))})))}),[n,t]);var T=function(){var e=Object(K.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=h.map((function(e){var n=Object(p.a)({},e);return n._id===t&&(n.read||(r(ir(t)),n.read=!0),"leave"==n.content.type?s("leaves/view/".concat(n.content.id)):"training"==n.content.type&&s("training/view/".concat(n.content.id))),n})),x(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(K.a)(B.a.mark((function e(n,a){var c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(sr(t._id,{type:a}));case 2:c=h.filter((function(e){return e.content.type!=a})),x(c),m.b.success("Clear".concat(" ",n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(Ta.jsxs)(rr,{className:"action",count:g,onItemClick:function(e){T(e._id)},onClear:function(e,t){return w(e,t)},loading:j,clearText:"Clear",viewMoreText:"View More",onViewMore:function(){return m.b.info("Click on view more")},clearClose:!0,children:[Object(Ta.jsx)(rr.Tab,{tabKey:"leave",count:v.leave,list:y.leave,title:"Leave",emptyText:"You have no new notifiications"}),Object(Ta.jsx)(rr.Tab,{tabKey:"training",count:v.training,list:y.training,title:"Training",emptyText:"You have no new notifiications"})]})},lr=n(1050),ur=n(67),dr=n(289),jr=n.n(dr),br=function(e){var t=e.user,n=e.logout,a=(Object(i.b)(),Object(Ea.g)(),Object(Ea.f)(),Object(Ta.jsxs)(ur.a,{className:jr.a.menu,children:[Object(Ta.jsx)(ur.a.Item,{children:Object(Ta.jsx)(U.b,{to:"/profile",children:"Profile"})},"profile"),Object(Ta.jsxs)(ur.a.Item,{onClick:n,children:[Object(Ta.jsx)(lr.a,{}),"Logout"]},"logout")]}));return t?Object(Ta.jsx)(tr,{overlay:a,trigger:["click"],children:Object(Ta.jsx)("span",{className:"".concat(jr.a.action," ").concat(jr.a.account),children:Object(Ta.jsx)("span",{className:"".concat(jr.a.name," anticon"),children:Object(Ta.jsx)(P.a.Text,{ellipsis:!0,style:{paddingTop:"35px",paddingBottom:"10px"},children:"".concat(t.first_name," ").concat(t.last_name)})})})}):Object(Ta.jsx)(U.b,{to:"/auth",children:"Login"})},pr=(n(767),n(555)),fr=n(47),Or=n(66),mr=(n(768),function(e,t){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:it}),t.next=4,ae(e);case 4:return a=t.sent,r=a.data,n({type:tt,data:r}),n({type:ot}),n({type:ut,payload:{success:"Login successful"}}),t.abrupt("return",!0);case 12:return t.prev=12,t.t0=t.catch(0),n({type:lt,error:t.t0}),t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}),hr=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:it}),t.next=4,re(e);case 4:a=t.sent,r=a.data,n({type:nt,data:r}),n({type:ot}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:lt,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},xr=function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:it}),n.next=4,ce(e,t);case 4:r=n.sent,c=r.data,a({type:at,payload:c}),a({type:ot}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:lt,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},yr=function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:it}),n.next=4,se(e,t);case 4:r=n.sent,r.data,a({type:ct,payload:{settings:t}}),a({type:ot}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:lt,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},vr=P.a.Title,gr=function(){var e=Object(i.c)((function(e){return e.auth})),t=e.error,n=(e.success,e.isLoading,Object(i.b)()),a=(Object(Ea.g)(),function(){var e=Object(K.a)(B.a.mark((function e(a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(mr(a));case 2:e.sent||pr.a.error({content:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(x.a,{src:"/INTI_logo.png",preview:!1,style:{display:"block",marginLeft:"auto",marginRight:"auto",width:"50%"}}),Object(Ta.jsx)(vr,{level:2,style:{textAlign:"center",padding:"20px"},children:"Sign In"}),Object(Ta.jsxs)(fr.a,{labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},name:"basic",onFinish:a,autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{label:"Email",name:"email",rules:[{required:!0,type:"email"}],children:Object(Ta.jsx)(Or.a,{autoFocus:!0})}),Object(Ta.jsx)(fr.a.Item,{label:"Password",name:"password",rules:[{required:!0},{pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,}$",message:"Minimum eight characters, at least one upper case English letter, one lower case English letter, one number and one special character"}],children:Object(Ta.jsx)(Or.a.Password,{placeholder:"Please enter password"})}),Object(Ta.jsx)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Sign In"})})]}),Object(Ta.jsx)("div",{style:{textAlign:"center"},children:Object(Ta.jsx)(U.b,{to:"/resetPassword",children:"Forgot Password"})})]})},Tr=n(88),wr=n(105),Dr=n(1029),_r=(n(769),n(566)),Ir=n(371),kr=n(1051),Er=n(236),Cr=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Qt}),t.next=4,he(e);case 4:a=t.sent,r=a.data,n({type:en,payload:r}),n({type:$t}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:Xt,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},Ar=function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:Qt}),n.next=4,ge(e,t);case 4:r=n.sent,c=r.data,a({type:Kt,payload:c}),a({type:Zt,payload:{success:"Delete success"}}),a({type:$t}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:Xt,error:n.t0});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},Sr=Or.a.TextArea,Rr=Tr.a.RangePicker,Pr=wr.a.Option,Lr=(P.a.Text,function(e){var t=e.user,n=Object(Ea.g)(),r=Object(Ea.h)().id,c=Object(i.c)((function(e){return e.leaves})).leave,s=Object(a.useState)(!1),o=Object(f.a)(s,2),l=(o[0],o[1],Object(i.c)((function(e){return e.leaveTypes})).leaveTypes),u=Object(i.c)((function(e){return e.holidays})).holidays,d=fr.a.useForm(),j=Object(f.a)(d,1)[0],b=Object(a.useState)(null),p=Object(f.a)(b,2),O=(p[0],p[1]),m=Object(a.useState)(!1),h=Object(f.a)(m,2),x=h[0],y=h[1],v=Object(i.b)();Object(a.useEffect)((function(){v(Cr(da()().format("YYYY"))),v(ia()),r&&(y(!0),v(Xn(r)).then((function(e){j.setFieldsValue({reason:e.reason||"",leaveType:e.leaveType._id,"range-picker":[da()(e.fromDate),da()(e.toDate)]}),y(!1)})))}),[v,r]);return x?Object(Ta.jsx)(Er.a,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:r?"Edit Leave":"Apply for Leave"}),Object(Ta.jsxs)(fr.a,{form:j,labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},onFinish:function(e){var a=e["range-picker"],s=a[0],i=a[1],o=function(e,t){for(var n=da()(e),a=0;n.isSameOrBefore(t,"day");)[0,6].includes(n.day())||a++,n.add(1,"d");return u.lists.forEach((function(n){if(e>=n.startDate&&t<=n.endDate){var r=da()(n.endDate).diff(da()(n.startDate),"days");a-=r}})),a}(s,i);if(0!=o){var d=[];O(null);var j=new FormData;if(e.upload){var b,p=Object(ka.a)(e.upload);try{var m=function(){var e=b.value;e.originFileObj?j.append("files",e.originFileObj):d.push(c.attachments.find((function(t){return t.fileId==e.uid})))};for(p.s();!(b=p.n()).done;)m()}catch(y){p.e(y)}finally{p.f()}}else r&&(d=c.attachments);l.find((function(t){return t._id===e.leaveType}));var h=t.leaveCount.find((function(t){return t.leaveType._id==e.leaveType})).count,x={user_name:"".concat(t.first_name," ").concat(t.last_name),reason:e.reason||"",leaveType:e.leaveType,user:t._id,department:t.department._id,fromDate:s.format("YYYY-MM-DD HH:mm"),toDate:i.format("YYYY-MM-DD HH:mm")};Object.entries(x).forEach((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];j.append(n,a)})),h>=o?r?(j.append("attachments",JSON.stringify(d)),v(Zn(r,j)),pr.a.success({content:"Changes saved.",onOk:function(){n("/leaves/home")}})):(v(function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Ke}),t.next=4,c=e,J.post("/leaves",c);case 4:a=t.sent,r=a.data,n({type:qe,payload:r}),n({type:We}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:Je,error:t.t0});case 13:case"end":return t.stop()}var c}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(j)),pr.a.success({content:"Leave application submitted.",onOk:function(){n("/leaves/home")}})):O("Insufficient leave balance")}else pr.a.error({content:"Selected day is on holidays or weekend, do not need to apply!"})},autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{label:"Leave Type",name:"leaveType",rules:[{required:!0}],children:Object(Ta.jsx)(wr.a,{placeholder:"Please choose a leave type",children:t.leaveCount.map((function(e){return Object(Ta.jsx)(Pr,{value:e.leaveType._id,children:e.leaveType.name},e.leaveType._id)}))})}),Object(Ta.jsx)(fr.a.Item,{label:"Reason",name:"reason",rules:[{required:!0,whitespace:!0}],children:Object(Ta.jsx)(Sr,{rows:4,placeholder:"Please enter reason"})}),Object(Ta.jsx)(fr.a.Item,{label:"Date",name:"range-picker",rules:[{required:!0}],children:Object(Ta.jsx)(Rr,{style:{width:"100%"},disabledDate:function(e){var t=j.getFieldValue("leaveType");if(!t)return!0;var n,a,r=l.find((function(e){return e._id==t})),c=r.startDate,s=r.endDate;if("year"==c||"month"==c)n=da()().startOf(c);else{var i=c.charAt(0),o=parseInt(c.substring(1));n="+"==i?da()().add(o,"days"):da()().subtract(o,"days")}if("year"==s||"month"==s)a=da()().endOf(s);else{var u=s.charAt(0),d=parseInt(s.substring(1));a="+"==u?da()().add(d,"days"):da()().subtract(d,"days")}return e<n||e>a}})}),Object(Ta.jsx)(fr.a.Item,{name:"upload",label:"Supporting Documents",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},children:Object(Ta.jsx)(Dr.a.Dragger,{name:"logo",listType:"picture",customRequest:function(e){e.file;var t=e.onSuccess;setTimeout((function(){t("ok")}),0)},defaultFileList:function(){var e;return r?(null===c||void 0===c||null===(e=c.attachments)||void 0===e?void 0:e.map((function(e){return{uid:e.fileId,name:e.fileName,status:"done",url:e.filePath}})))||[]:null},showUploadList:{showDownloadIcon:!0,downloadIcon:function(e){return"done"==e.status?Object(Ta.jsx)(_r.a,{}):Object(Ta.jsx)(Ta.Fragment,{})},showRemoveIcon:!0,removeIcon:function(e){return"done"==e.status?Object(Ta.jsx)(Ta.Fragment,{}):Object(Ta.jsx)(Ir.a,{})}},children:Object(Ta.jsx)(M.a,{icon:Object(Ta.jsx)(kr.a,{}),children:"Click to upload"})})}),Object(Ta.jsxs)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:[Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Ta.jsx)(M.a,{type:"secondary",htmlType:"button",onClick:function(){return n(-1)},children:"Back"})]})]})]})}),Nr=(n(771),function(){return function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:ft}),e.next=4,J.get("/users");case 4:n=e.sent,a=n.data,t({type:bt,payload:a}),t({type:Ot}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:mt,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}),Fr=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ft}),t.next=4,ue(e);case 4:return a=t.sent,r=a.data,n({type:pt,payload:r}),n({type:Ot}),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(0),n({type:mt,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Yr=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ft}),t.next=4,le(e);case 4:return a=t.sent,r=a.data,n({type:dt,payload:r}),n({type:Ot}),t.abrupt("return",r);case 11:return t.prev=11,t.t0=t.catch(0),n({type:mt,error:t.t0}),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Hr=function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:ft}),n.next=4,de(e,t);case 4:r=n.sent,c=r.data,a({type:jt,payload:c}),a({type:Ot}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:mt,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},Mr=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ft}),t.next=4,je(e);case 4:a=t.sent,r=a.data,n({type:xt,payload:r}),n({type:Ot}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:mt,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},qr=function(e){var t=e.user,n=_a()(),r=Object(i.c)((function(e){return e.leaves})),c=r.leave,s=r.isLoading,o=Object(i.c)((function(e){return e.holidays})).holidays,l=Object(i.b)(),u=Object(a.useState)(!0),d=Object(f.a)(u,2),j=d[0],b=d[1],O=Object(Ea.g)(),m=Object(Ea.h)().id;Object(a.useEffect)((function(){l(Cr(da()().format("YYYY"))),l(Xn(m)).then((function(){return b(!1)}))}),[l,m]);var h,x=function(e){l(Zn(m,Object(p.a)(Object(p.a)({},c),{},{status:e}))),"Approved"==e&&l(Fr(c.user._id)).then((function(e){var t=e.leaveCount.find((function(e){return e.leaveType._id==c.leaveType._id})).count-function(e,t){for(var n=da()(e),a=0;n.isSameOrBefore(t,"day");)[0,6].includes(n.day())||a++,n.add(1,"d");return null===o||void 0===o||o.lists.forEach((function(n){if(e>=n.startDate&&t<=n.endDate){var r=da()(n.endDate).diff(da()(n.startDate),"days");a-=r}})),a}(c.startDate,c.endDate),n=e.leaveCount.map((function(e){return e.leaveType._id==c.leaveType._id?Object(p.a)(Object(p.a)({},e),{},{count:t}):e}));l(Hr(e._id,{leaveCount:n}))}))};return j||s?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsxs)(Y.b,{title:"Leave Info",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},layout:n.md?"horizontal":"vertical",children:[Object(Ta.jsx)(Y.b.Item,{label:"Requester",span:3,children:"".concat(c.user.first_name," ").concat(c.user.last_name)}),Object(Ta.jsx)(Y.b.Item,{label:"Department",span:3,children:c.department.name}),Object(Ta.jsx)(Y.b.Item,{label:"Leave Type",span:3,children:Object(Ta.jsx)(V.a,{color:c.leaveType.color,children:(h=c.leaveType.code,h.charAt(0).toUpperCase()+h.slice(1))})}),Object(Ta.jsx)(Y.b.Item,{label:"Reason",span:3,children:c.reason}),Object(Ta.jsx)(Y.b.Item,{label:"Start Date",span:1,children:da()(c.fromDate).format("YYYY-MM-DD")}),Object(Ta.jsx)(Y.b.Item,{label:"End Date",span:2,children:da()(c.toDate).format("YYYY-MM-DD")}),Object(Ta.jsx)(Y.b.Item,{label:"Supporting Documents",span:3,children:0!=c.attachments.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(Dr.a,{className:"showFiles",defaultFileList:function(){var e;return m?(null===c||void 0===c||null===(e=c.attachments)||void 0===e?void 0:e.map((function(e){return{uid:e.fileId,name:e.fileName,status:"done",url:e.filePath}})))||[]:null},showUploadList:{showDownloadIcon:!0,showRemoveIcon:!1}})}):Object(Ta.jsx)("div",{children:"None"})}),Object(Ta.jsx)(Y.b.Item,{label:"Status",span:3,children:Object(Ta.jsx)(Ua.a,{status:"Pending"==c.status?"processing":"Approved"==c.status?"success":"error",text:c.status})})]}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsxs)(y.b,{size:"middle",children:[Object(Ta.jsx)(M.a,{type:"default",onClick:function(){return O(-1)},children:"Back"}),"Pending"==c.status&&c.user._id==t._id?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(M.a,{type:"primary",danger:!0,onClick:function(){return x("Cancelled")},children:"Cancel"})}):c.user._id!=t._id&&"Pending"==c.status&&Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(M.a,{type:"success",onClick:function(){return x("Approved")},children:"Approve"}),Object(Ta.jsx)(M.a,{type:"primary",danger:!0,onClick:function(){return x("Rejected")},children:"Reject"})]})]})]})},zr=function(){return function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:wt}),e.next=4,J.get("/depts");case 4:n=e.sent,a=n.data,t({type:Tt,payload:a}),t({type:Dt}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:_t,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},Vr=n(102),Ur=n(86),Gr=n.n(Ur),Br=P.a.Text,Kr=function(){var e=Object(i.c)((function(e){return e.holidays})).holidays,t=Object(i.c)((function(e){return e.leaves})),n=t.leaves,r=t.isLoading,c=Object(i.c)((function(e){return e.depts})).depts,s=Object(i.c)((function(e){return e.leaveTypes})).leaveTypes,o=JSON.parse(localStorage.getItem("profile")).result,l=(Object(Ea.g)(),[]),d=[],j=Object(i.b)();Object(a.useEffect)((function(){j(Cr(da()().format("YYYY"))),j(na(o.roles.name,o._id,o.department.name)),j(zr()),j(ia())}),[j]),"admin"==o.roles.name&&c.map((function(e){l.push({text:e.name,value:e.name})})),s.map((function(e){d.push({text:e.name,value:e.code})}));var b=[{title:"Employee Name",dataIndex:"user",key:"user",valueType:"text",render:function(e,t){return"".concat(e.first_name," ").concat(e.last_name)}},{title:"Department",dataIndex:["department","name"],key:"department",hideInSearch:!0,filters:l,onFilter:function(e,t){return 0===t.department.name.indexOf(e)}},{title:"Reason",dataIndex:"reason",key:"reason",hideInSearch:!0,render:function(e,t){return Object(Ta.jsx)(Br,{ellipsis:!0,children:e})}},{title:"Leave Type",dataIndex:"leaveType",key:"leaveType",filters:d,hideInSearch:!0,onFilter:function(e,t){return 0===t.leaveType.code.indexOf(e)},render:function(e,t){return Object(Ta.jsx)(V.a,{color:e.color,children:(n=e.code,n?n.charAt(0).toUpperCase()+n.slice(1):n)});var n}},{title:"Start Date",dataIndex:"fromDate",key:"fromDate",valueType:"date",sorter:function(e,t){return da()(e.fromDate)-da()(t.fromDate)},render:function(e,t){return da()(t.fromDate).format("YYYY-MM-DD")}},{title:"Start Date to End Date",dataIndex:"fromDate",valueType:"dateRange",key:"somehtin",hideInTable:!0,search:{transform:function(e){return{startTime:e[0],endTime:e[1]}}}},{title:"End Date",dataIndex:"toDate",key:"toDate",valueType:"date",sorter:function(e,t){return da()(e.toDate)-da()(t.toDate)},render:function(e,t){return da()(t.toDate).format("YYYY-MM-DD")}},{title:"Total Days",hideInSearch:!0,dataIndex:"toDate",key:"totalDays",render:function(t,n){return function(t,n){for(var a=da()(t),r=0;a.isSameOrBefore(n,"day");)[0,6].includes(a.day())||r++,a.add(1,"d");return e.lists.forEach((function(e){if(t>=e.startDate&&n<=e.endDate){var a=da()(e.endDate).diff(da()(e.startDate),"days");r-=a}})),r}(n.fromDate,n.toDate)}},{title:"Status",dataIndex:"status",key:"status",filters:[{text:"Pending",value:"Pending"},{text:"Approved",value:"Approved"},{text:"Rejected",value:"Rejected"}],hideInSearch:!0,onFilter:function(e,t){return 0===t.status.indexOf(e)},render:function(e,t){return Object(Ta.jsx)(Ua.a,{status:"Pending"==t.status?"processing":"Approved"==t.status?"success":"error",text:t.status})}},{title:"Action",key:"_id",valueType:"option",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(U.b,{to:"/leaves/view/".concat(t._id),children:"View"})},t._id)}}],p=Object(a.useRef)(),f=function(e){var t=new Array;if(e)for(var n=e.length-1;n>=0;n--)t.push(e[n]);return t}(n);return r?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("h2",{children:"Leave Requests"}),n.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(Vr.a,{columns:b,actionRef:p,request:function(e,t,n){var a=f;return e&&Object.keys(e).length>0&&(a=a.filter((function(t){return Object.keys(e).every((function(n){if(!e[n])return!0;if("pageSize"==n||"current"==n)return!0;if("all"==e[n])return!0;var a=t[n];if("user"==n)a="".concat(t.user.first_name," ").concat(t.user.last_name);else if("department"==n)a="".concat(t.department.name);else{if("startTime"==n)return da()(t.fromDate).diff(da()(e[n]))>=0;if("endTime"==n)return da()(t.toDate).diff(da()(e[n]),"days")<=0}return!a||-1!=a.search(new RegExp(".*"+e[n]+".*","gi"))}))}))),Promise.resolve({data:a,success:!0})},rowKey:"_id",pagination:{pageSize:10,showQuickJumper:!0},search:{labelWidth:"auto"},dateFormatter:"string",toolbar:{title:"Tips:",tooltip:"Use the search bar above or filter icons on the columns for easy record finding"},toolBarRender:function(){return[Object(Ta.jsx)(y.b,{children:Object(Ta.jsx)(M.a,{type:"primary",shape:"round",children:Object(Ta.jsx)(U.b,{to:"/leaves/create",children:"To Leave Application"})})})]}})})}):Object(Ta.jsx)(q.a,{})]})},Wr=function(){var e,t=Object(i.c)((function(e){return e.leaves})),n=t.leaveHistory,r=t.isLoading,c=Object(i.c)((function(e){return e.leaveTypes})).leaveTypes,s=Object(i.c)((function(e){return e.holidays})).holidays,o=JSON.parse(localStorage.getItem("profile")).result,l=(Object(Ea.g)(),Object(i.b)()),d=[];Object(a.useEffect)((function(){var e;l((e=o._id,function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Ke}),t.next=4,ne(e);case 4:a=t.sent,r=a.data,n({type:Ze,payload:r}),n({type:We}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:Je,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}())),l(ia()),l(Cr(da()().format("YYYY")))}),[l]),c.map((function(e){d.push({text:e.name,value:e.code})}));var j=Object(a.useRef)(),b=[{title:"Leave Type",dataIndex:"leaveType",key:"leaveType",filters:d,hideInSearch:!0,onFilter:function(e,t){return 0===t.leaveType.code.indexOf(e)},render:function(e,t){return Object(Ta.jsx)(V.a,{color:e.color,children:(n=e.code,n.charAt(0).toUpperCase()+n.slice(1))});var n}},{title:"Start Date",dataIndex:"fromDate",key:"fromDate",valueType:"date",sorter:function(e,t){return da()(e.fromDate)-da()(t.fromDate)},render:function(e,t){return da()(t.fromDate).format("YYYY-MM-DD")}},{title:"Start Date to End Date",dataIndex:"fromDate",valueType:"dateRange",key:"somehtin",hideInTable:!0,search:{transform:function(e){return{startTime:e[0],endTime:e[1]}}}},{title:"End Date",dataIndex:"toDate",key:"toDate",valueType:"date",sorter:function(e,t){return da()(e.toDate)-da()(t.toDate)},render:function(e,t){return da()(t.toDate).format("YYYY-MM-DD")}},{title:"Total Days",hideInSearch:!0,dataIndex:"toDate",key:"totalDays",render:function(e,t){return function(e,t){for(var n=da()(e),a=0;n.isSameOrBefore(t,"day");)[0,6].includes(n.day())||a++,n.add(1,"d");return s.lists.forEach((function(n){if(e>=n.startDate&&t<=n.endDate){var r=da()(n.endDate).diff(da()(n.startDate),"days");a-=r}})),a}(t.fromDate,t.toDate)}},{title:"Status",dataIndex:"status",key:"status",filters:[{text:"Pending",value:"Pending"},{text:"Approved",value:"Approved"},{text:"Rejected",value:"Rejected"}],hideInSearch:!0,onFilter:function(e,t){return 0===t.status.indexOf(e)},render:function(e,t){return Object(Ta.jsx)(Ua.a,{status:"Pending"==t.status?"processing":"Approved"==t.status?"success":"error",text:t.status})}},{title:"Action",key:"_id",valueType:"option",render:function(e,t){return Object(Ta.jsxs)(y.b,{size:"middle",children:[Object(Ta.jsx)(U.b,{to:"/leaves/view/".concat(t._id),children:"View"}),"Pending"==t.status&&Object(Ta.jsx)(U.b,{to:"/leaves/edit/".concat(t._id),children:"Edit"})]},t._id)}}],p=function(e){var t=new Array;if(e)for(var n=e.length-1;n>=0;n--)t.push(e[n]);return t}(n);return!r&&n&&c?Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("h2",{children:"My Leave Applications"}),n.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(Vr.a,(e={search:{span:24},rowKey:"id",columns:b,actionRef:j,request:function(e,t,n){var a=p;return e&&Object.keys(e).length>0&&(a=a.filter((function(t){return Object.keys(e).every((function(n){if(!e[n])return!0;if("pageSize"==n||"current"==n)return!0;if("all"==e[n])return!0;var a=t[n];if("user"==n)a="".concat(t.user.first_name," ").concat(t.user.last_name);else if("department"==n)a="".concat(t.department.name);else{if("startTime"==n)return da()(t.fromDate).diff(da()(e[n]))>=0;if("endTime"==n)return da()(t.toDate).diff(da()(e[n]),"days")<=0}return!a||-1!=a.search(new RegExp(".*"+e[n]+".*","gi"))}))}))),Promise.resolve({data:a,success:!0})}},Object(Wa.a)(e,"rowKey","_id"),Object(Wa.a)(e,"pagination",{pageSize:10,showQuickJumper:!0}),Object(Wa.a)(e,"search",{labelWidth:"auto"}),Object(Wa.a)(e,"dateFormatter","string"),Object(Wa.a)(e,"toolbar",{title:"Tips:",tooltip:"Use the search bar above or filter icons on the columns for easy record finding"}),Object(Wa.a)(e,"toolBarRender",(function(){return[Object(Ta.jsx)(M.a,{type:"primary",shape:"round",children:Object(Ta.jsx)(U.b,{to:"/leaves/create",children:"To Leave Application"})},"primary")]})),e))})}):Object(Ta.jsx)(q.a,{})]}):Object(Ta.jsx)(wa,{})},Jr=n(342),Qr=n(91),$r=(n(870),function(){return function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:qt}),e.next=4,J.get("/roles");case 4:n=e.sent,a=n.data,t({type:Ht,payload:a}),t({type:zt}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:Vt,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}),Xr=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Mn}),t.next=4,Ae(e);case 4:a=t.sent,r=a.data,n({type:Fn,payload:r}),n({type:qn}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:zn,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},Zr=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Mn}),t.next=4,Se(e);case 4:return a=t.sent,r=a.data,n({type:Hn,payload:r}),n({type:qn}),t.abrupt("return",r);case 11:return t.prev=11,t.t0=t.catch(0),n({type:zn,error:t.t0}),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},ec=(Or.a.TextArea,Tr.a.RangePicker,wr.a.Option),tc=fr.a.useForm,nc=function(){var e=Object(Ea.g)(),t=tc(),n=Object(f.a)(t,1)[0],r=Object(Ea.h)().id,c=Object(a.useState)(!0),s=Object(f.a)(c,2),o=s[0],l=s[1],u=Object(a.useRef)(),d=Object(a.useState)(!1),j=Object(f.a)(d,2),b=j[0],O=j[1],m=Object(a.useState)({policy:!1,employment_date:!1}),h=Object(f.a)(m,2),x=h[0],y=h[1],v=Object(a.useState)({}),g=Object(f.a)(v,2),T=g[0],w=g[1],D=Object(a.useState)("Select a policy to show description"),_=Object(f.a)(D,2),I=_[0],k=_[1],E=Object(a.useState)(""),C=Object(f.a)(E,2),A=(C[0],C[1],Object(a.useState)({emp_id:"",first_name:"",last_name:"",email:"",employment_date:"",password:"",department:"",roles:""})),S=Object(f.a)(A,2),R=(S[0],S[1],Object(i.b)());Object(a.useEffect)((function(){F().then((function(){return l(!1)}))}),[R]);var F=function(){var e=Object(K.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R($r());case 2:return e.next=4,R(zr());case 4:return e.next=6,R(ia());case 6:if(!r){e.next=11;break}return e.next=9,R(Fr(r)).then(function(){var e=Object(K.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(Xr(t.department._id));case 2:a={},t.leaveCount.forEach((function(e){a[e.leaveType._id]=e.count})),n.setFieldsValue({emp_id:t.emp_id,first_name:t.first_name,last_name:t.last_name,email:t.email,employment_date:da()(t.employment_date),department:t.department._id,policy:t.policy._id,roles:t.roles._id,trainingHours:t.trainingHours,leaveType:Object(p.a)({},a)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:O(!0),y({policy:!0,employment_date:!0});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=Object(i.c)((function(e){return e.depts})).depts,H=Object(i.c)((function(e){return e.roles})).roles,q=Object(i.c)((function(e){return e.policy})).policies,z=Object(i.c)((function(e){return e.leaveTypes})).leaveTypes,V=Object(i.c)((function(e){return e.users})),G=V.user,W=(V.error,function(){var t=Object(K.a)(B.a.mark((function t(n){var a,c,s,i,o,l;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=[],c=0,s=Object.entries(n.leaveType);c<s.length;c++)i=Object(f.a)(s[c],2),o=i[0],l=i[1],a.push({leaveType:o,count:l});if(!r){t.next=8;break}return t.next=5,R(Hr(r,{extra:{department:G.department._id},emp_id:n.emp_id,first_name:n.first_name,last_name:n.last_name,email:n.email,policy:n.policy,employment_date:n.employment_date.format("YYYY-MM-DD"),department:n.department,roles:n.roles,leaveCount:a,trainingHours:n.trainingHours}));case 5:pr.a.success({content:"Staff Updated",onOk:function(){e("/users")}}),t.next=12;break;case 8:return t.next=10,R(Yr({emp_id:n.emp_id,first_name:n.first_name,last_name:n.last_name,email:n.email,policy:n.policy,employment_date:n.employment_date.format("YYYY-MM-DD"),department:n.department,roles:n.roles,leaveCount:a,trainingHours:n.trainingHours}));case 10:t.sent?pr.a.success({content:"Staff created",onOk:function(){e("/users")}}):pr.a.error({content:"Email already exist"});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),J=function(){var e=Object(K.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setFieldsValue({policy:void 0}),k("Select a policy to show description"),y(Object(p.a)(Object(p.a)({},x),{},{policy:!1})),e.next=5,R(Xr(t));case 5:O(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e,t){var n=da()().diff(e,"years"),a={};return z.forEach((function(e){return a[e._id]=0})),t.lists.forEach((function(e){var t=e.policy.filter((function(e){return"after"==e.condition1})),r=e.policy.filter((function(e){return"every"==e.condition1})),c=e.stacked,s=0,i=0;t.forEach((function(e){n>=e.year&&(c?i+=e.increase:e.year>s&&(i=e.increase,s=e.year))})),r.forEach((function(e){var t=Math.floor(n/e.year);i+=t*e.increase})),e.leavetype.forEach((function(e){return a[e._id]=i}))})),console.log("inc",a),a},$=function(){var e=n.getFieldValue("employment_date"),t=(da()().diff(e,"years"),n.getFieldValue("policy"));console.log(q);var a=q.find((function(e){return e._id==t})),c=Q(e,a);console.log(c,"curInc");var s={};z.forEach((function(e){return s[e._id]=e.count}));var i={};if(z.forEach((function(e){return i[e._id]="Base: ".concat(e.count," Not applicable")})),r){if(G.policy._id!=a){var o={};G.leaveCount.forEach((function(e){o[e.leaveType._id]=e.count})),console.log("here"),u.current||(u.current=Q(G.employment_date,q.find((function(e){return e._id==G.policy._id}))));var l=u.current;console.log(l,c),z.forEach((function(e){var t=l[e._id]-c[e._id];s[e._id]=o[e._id]-t,s[e._id]=s[e._id]>0?s[e._id]:0,i[e._id]=0==t?" Current: ".concat(o[e._id]," No changes"):t>=0?" Current: ".concat(o[e._id]," Decrease: ").concat(Math.abs(t)):" Current: ".concat(o[e._id]," Increase: ").concat(Math.abs(t))})),w(i),n.setFieldsValue({leaveType:s})}}else{for(var d=0,j=Object.entries(c);d<j.length;d++){var b=Object(f.a)(j[d],2),p=b[0],O=b[1];i[p]="Base: ".concat(s[p]," + Increase: ").concat(O),s[p]+=O}w(i),n.setFieldsValue({leaveType:s})}},X=function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=q.find((function(e){return e._id==t})),{},a=n.lists.map((function(e,t){return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("b",{children:e.leavetype.map((function(e){return"".concat(e.name,", ")}))}),e.stacked?Object(Ta.jsx)("p",{children:"Stacked"}):Object(Ta.jsx)(Ta.Fragment,{}),e.policy.map((function(e,t){return Object(Ta.jsx)("p",{children:"".concat(e.condition1," ").concat(e.year," years, increase by ").concat(e.increase)},t)}))]})})),k(a),r=Object(p.a)(Object(p.a)({},x),{},{policy:!0}),y(r),r.employment_date&&r.policy&&$();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o?Object(Ta.jsx)(Er.a,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:r?"Edit Staff":"Create Staff"}),Object(Ta.jsx)(L.a,{children:Object(Ta.jsx)(N.a,{xl:{offset:6,span:12},children:Object(Ta.jsxs)(fr.a,{form:n,name:"basic",onFinish:W,autoComplete:"off",labelCol:{sm:{span:8}},children:[Object(Ta.jsx)(fr.a.Item,{label:"Employee ID",name:"emp_id",rules:[{required:!0,whitespace:!0}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter employee's ID"})}),Object(Ta.jsx)(fr.a.Item,{label:"First Name",name:"first_name",rules:[{required:!0,whitespace:!0}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter employee's first name"})}),Object(Ta.jsx)(fr.a.Item,{label:"Last Name",name:"last_name",rules:[{required:!0,whitespace:!0}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter employee's last name"})}),Object(Ta.jsx)(fr.a.Item,{label:"Email",name:"email",rules:[{required:!0,type:"email",whitespace:!0}],children:Object(Ta.jsx)(Or.a,{disabled:!!r,type:"email",placeholder:"Please enter employee's email"})}),Object(Ta.jsx)(fr.a.Item,{label:"Employment Date",name:"employment_date",rules:[{required:!0}],children:Object(Ta.jsx)(Tr.a,{style:{width:"100%"},onChange:function(e){var t=Object(p.a)(Object(p.a)({},x),{},{employment_date:!0});y(t),t.employment_date&&t.policy&&$()}})}),Object(Ta.jsx)(fr.a.Item,{label:"Department",name:"department",rules:[{required:!0}],children:Object(Ta.jsx)(wr.a,{placeholder:"Please choose employee's department",onChange:J,children:Y.map((function(e){return Object(Ta.jsx)(ec,{value:e._id,children:e.name},e._id)}))})}),Object(Ta.jsx)(fr.a.Item,{help:Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Paragraph,{children:"Staff: Can Apply Leave and Training. Have Personal Dashboard"}),Object(Ta.jsx)(P.a.Paragraph,{children:"Supervisor: All privilege of staff applied Can approve / reject leave.Have own department dashboard. Can view leave and training list of own department."}),Object(Ta.jsx)(P.a.Paragraph,{children:"Admin: All privilege of Supervisor applied. Have Admin Dashboard and view all department training and leave list. Can Create Internal Training."})]}),label:"Roles",name:"roles",rules:[{required:!0}],children:Object(Ta.jsx)(wr.a,{placeholder:"Please choose employee's role",children:H.map((function(e){return Object(Ta.jsx)(ec,{value:e._id,children:e.name},e._id)}))})}),b&&Object(Ta.jsx)(fr.a.Item,{help:I,label:"Policy",name:"policy",rules:[{required:!0}],children:Object(Ta.jsx)(wr.a,{placeholder:"Please choose a policy",onChange:X,children:q.map((function(e){return Object(Ta.jsx)(ec,{value:e._id,children:e.name},e._id)}))})}),Object(Ta.jsx)(Jr.a,{orientation:"center",children:"Training"}),Object(Ta.jsx)(fr.a.Item,{label:"Training Hours",name:"trainingHours",initialValue:"30",rules:[{required:!0}],children:Object(Ta.jsx)(Qr.a,{style:{width:"100%"},min:0})}),Object(Ta.jsx)(Jr.a,{orientation:"center",children:"Leave"}),x.policy&&x.employment_date?z.map((function(e){return Object(Ta.jsx)(fr.a.Item,{label:e.name,name:[["leaveType"],[e._id]],initialValue:e.count,help:T[e._id]?T[e._id]:"Not applicable",rules:[{required:!0}],children:Object(Ta.jsx)(Qr.a,{style:{width:"100%"},min:0})},e._id)})):Object(Ta.jsx)("p",{style:{textAlign:"center"},children:"Select employment date and policy to view leave count"}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsxs)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:[Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/users",children:"Back"})})]})]})})})]})},ac=(n(871),z.a.Column),rc=function(){var e=Object(i.c)((function(e){return e.depts})).depts,t=Object(i.b)();Object(a.useEffect)((function(){t(zr())}),[t]);var n=Object(Ea.g)();return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(y.b,{style:{marginBottom:16},children:Object(Ta.jsx)(M.a,{onClick:function(){n("/depts/create")},children:"Create New Department"})}),e.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:e,rowKey:"_id",children:[Object(Ta.jsx)(ac,{title:"Name",dataIndex:"name"},"name"),Object(Ta.jsx)(ac,{title:"Action",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(M.a,{onClick:function(){return e=t._id,void n("/depts/edit/".concat(e));var e},children:"edit"})})}},"action")]})}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("br",{}),Object(Ta.jsx)(ga.a,{size:"large"})]})]})},cc=(n(872),n(343)),sc=(n(873),P.a.Title),ic=function(e){e.user;var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],s=Object(cc.useForm)(),o=Object(f.a)(s,1)[0],l=Object(Ea.h)().id,u=Object(i.b)(),d=Object(Ea.g)();return Object(a.useEffect)((function(){l&&(c(!0),u(function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:wt}),t.next=4,ie(e);case 4:return a=t.sent,r=a.data,n({type:"FETCH_ONE_DEPT",payload:r}),n({type:Dt}),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(0),n({type:_t,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(l)).then((function(e){o.setFieldsValue(e),c(!1)})))}),[u,l]),r?Object(Ta.jsx)(Er.a,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(sc,{level:2,style:{textAlign:"center"},children:"Create Department"}),Object(Ta.jsxs)(fr.a,{labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},form:o,name:"basic",onFinish:function(e){var t;l?(u(function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:wt}),n.next=4,oe(e,t);case 4:r=n.sent,c=r.data,a({type:gt,payload:c}),a({type:Dt}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:_t,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(l,e)),pr.a.success({content:"Department updated",onOk:function(){d("/depts")}})):u((t=e,function(){var e=Object(K.a)(B.a.mark((function e(n){var a,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:wt}),e.next=4,c=t,J.post("/depts",c);case 4:a=e.sent,r=a.data,n({type:yt,payload:r}),n({type:Dt}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n({type:_t,error:e.t0});case 13:case"end":return e.stop()}var c}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{label:"Name",name:"name",rules:[{required:!0,whitespace:!0}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter name"})}),Object(Ta.jsxs)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:[Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/depts",children:"Back"})})]})]})]})},oc=n(235),lc=(n(935),z.a.Column),uc=oc.a.useBreakpoint,dc=function(e){var t=e.user,n=Object(i.c)((function(e){return e.users})),r=n.users,c=n.isLoading,s=(n.error,Object(i.b)());Object(a.useEffect)((function(){"supervisor"==t.roles.name?s(Mr(t.department._id)):s(Nr())}),[s]);var o=Object(Ea.g)();uc();return c?Object(Ta.jsx)(Er.a,{}):Object(Ta.jsxs)(Ta.Fragment,{children:["admin"==t.roles.name&&Object(Ta.jsx)(y.b,{style:{marginBottom:16},children:Object(Ta.jsx)(M.a,{onClick:function(){o("/users/create")},children:"Add User"})}),Object(Ta.jsx)("br",{}),c?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(ga.a,{size:"large"})}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsxs)(z.a,{dataSource:r,rowKey:"_id",children:[Object(Ta.jsx)(lc,{title:"Employee ID",dataIndex:"emp_id"},"emp_id"),Object(Ta.jsx)(lc,{title:"Name",render:function(e,t){return Object(Ta.jsxs)("div",{children:[t.first_name," ",t.last_name]})}},"name"),Object(Ta.jsx)(lc,{title:"Department",dataIndex:["department","name"]},"department.name"),Object(Ta.jsx)(lc,{title:"Roles",dataIndex:["roles","name"]},"roles.name"),Object(Ta.jsx)(lc,{title:"Action",render:function(e,t){return Object(Ta.jsxs)(y.b,{size:"middle",children:[Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/users/view/".concat(t._id),children:"View"})}),Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/users/edit/".concat(t._id),children:"Edit"})})]})}},"action")]}),Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/",children:"Back"})})]})]})},jc=(n(936),function(){var e,t,n=_a()(),r=Object(i.c)((function(e){return e.users})),c=r.user,s=(r.isLoading,Object(a.useState)(!1)),o=Object(f.a)(s,2),l=o[0],u=o[1],d=Object(i.b)(),j=(Object(Ea.g)(),Object(Ea.h)().id);Object(a.useEffect)((function(){b()}),[]);var b=function(){var e=Object(K.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,d(Fr(j));case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsxs)(Y.b,{title:"User Info",bordered:!0,layout:n.md?"horizontal":"vertical",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},children:[Object(Ta.jsx)(Y.b.Item,{label:"Employee ID",children:c.emp_id}),Object(Ta.jsx)(Y.b.Item,{label:"First Name",children:c.first_name}),Object(Ta.jsx)(Y.b.Item,{label:"Last Name",children:c.last_name}),Object(Ta.jsx)(Y.b.Item,{label:"Email",children:c.email}),Object(Ta.jsx)(Y.b.Item,{label:"Department",children:null===(e=c.department)||void 0===e?void 0:e.name}),Object(Ta.jsx)(Y.b.Item,{label:"Employment Date",children:da()(c.employment_date).format("YYYY-MM-DD")})]}),Object(Ta.jsx)(Y.b,{title:"Leave Balance",bordered:!0,children:null===c||void 0===c||null===(t=c.leaveCount)||void 0===t?void 0:t.map((function(e){return Object(Ta.jsx)(Y.b.Item,{label:e.leaveType.name,children:e.count},e.leaveType._id)}))}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/users",children:"Back"})})]})}),bc=n(313),pc=n(500),fc=n(501),Oc=n(502),mc=n(503),hc=(n(937),n(273),Or.a.TextArea,Tr.a.RangePicker,function(){var e=Object(Ea.g)(),t=Object(Ea.h)().id,n=Object(a.useState)("#39f983"),r=Object(f.a)(n,2),c=(r[0],r[1],Object(i.c)((function(e){return e.leaveTypes}))),s=(c.leaveType,c.isLoading,c.success,c.error,Object(a.useState)(!1)),o=Object(f.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)(!1),b=Object(f.a)(j,2),O=b[0],m=b[1],h=Object(a.useState)(!1),x=Object(f.a)(h,2),v=x[0],g=x[1],T=Object(a.useState)({code:"sample",color:"blue"}),w=Object(f.a)(T,2),D=w[0],_=w[1],I=fr.a.useForm(),k=Object(f.a)(I,1)[0],E=Object(i.b)(),C=function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c,s,i,o,l,u,d;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s="custom"==a.startDate?a.customStartDate:a.startDate,i="custom"==a.endDate?a.customEndDate:a.endDate,"year"==s||"month"==s?r=da()().startOf(s):(o=s.charAt(0),l=parseInt(s.substring(1)),r="+"==o?da()().add(l,"days"):da()().subtract(l,"days")),"year"==i||"month"==i?c=da()().endOf(i):(u=i.charAt(0),d=parseInt(i.substring(1)),c="+"==u?da()().add(d,"days"):da()().subtract(d,"days")),c.diff(r,"days")<0&&pr.a.error({content:"End date must be later than start date"}),t?(E(la(t,Object(p.a)(Object(p.a)({},a),{},{startDate:s,endDate:i}))),pr.a.success({content:"Leave type updated",onOk:function(){e("/leaveTypes")}})):(E(oa(Object(p.a)(Object(p.a)({},a),{},{startDate:s,endDate:i}))),pr.a.success({content:"Leave type created",onOk:function(){e("/leaveTypes")}}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();Object(a.useEffect)((function(){t&&(d(!0),E(function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:St}),t.next=4,pe(e);case 4:return a=t.sent,r=a.data,n({type:At,payload:r}),n({type:Rt}),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(0),n({type:Pt,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(t)).then((function(e){k.setFieldsValue(e),d(!1),_({code:e.code,color:e.color})})))}),[E,t]);return l?Object(Ta.jsx)(Er.a,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:t?"Edit Leave Type":"Create Leave Type"}),Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsxs)(bc.a,{onValuesChange:function(e,t){var n;(e.color||e.code)&&_({code:e.code?e.code:(n=D.code,!n||/^\s*$/.test(n)?"sample":D.code),color:e.color?e.color:D.color})},form:k,name:"basic",layout:"horizontal",labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},onFinish:C,autoComplete:"off",formKey:"base-form-use-demo",submitter:{resetButtonProps:{style:{display:"none"}},render:function(e,t){return Object(Ta.jsx)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:Object(Ta.jsx)(y.b,{children:t})})}},children:[Object(Ta.jsx)(pc.a,{name:"name",label:"Name",placeholder:"Enter Name",tooltip:"Press enter to autofill short name",fieldProps:{onPressEnter:function(e){var t=e.target.value.toLowerCase().split(" ")[0];k.setFieldsValue({code:t}),_(Object(p.a)(Object(p.a)({},D),{},{code:t}))}},rules:[{required:!0}]}),Object(Ta.jsx)(pc.a,{name:"code",label:"Short Name",placeholder:"Enter Short Name",tooltip:"This field is meant for display purpose",rules:[{required:!0}]}),Object(Ta.jsx)(fc.a,{name:"count",label:"Default Count",placeholder:"Enter Default count",rules:[{required:!0},{type:"number",min:0}]}),Object(Ta.jsx)(Oc.a,{fieldProps:{disableAlpha:!0},name:"color",initialValue:"blue",label:"color",rules:[{required:!0,message:"Please enter color"}]}),Object(Ta.jsx)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:Object(Ta.jsx)(N.a,{sm:{offset:8},children:Object(Ta.jsxs)(y.b,{children:["Preview:",Object(Ta.jsx)(V.a,{color:D.color,children:D.code})]})})}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)(mc.a.Group,{fieldProps:{onChange:function(e){"custom"==e.target.value?m(!0):m(!1)}},initialValue:"year",options:[{value:"year",label:"Year"},{value:"month",label:"Month"},{value:"custom",label:"Custom"}],name:"startDate",label:"Start Date"}),O&&Object(Ta.jsx)(pc.a,{validate:!0,name:"customStartDate",label:"Start Date",tooltip:"Number of days from now. Format: +/- number Eg: -7",placeholder:"+ or - with numbers eg: -7",rules:[{required:!0},{pattern:"[+-][\\d]+",message:"Invalid Format"}]}),Object(Ta.jsx)(mc.a.Group,{fieldProps:{onChange:function(e){"custom"==e.target.value?g(!0):g(!1)}},initialValue:"year",options:[{value:"year",label:"Year"},{value:"month",label:"Month"},{value:"custom",label:"Custom"}],name:"endDate",label:"End Date"}),v&&Object(Ta.jsx)(pc.a,{name:"customEndDate",label:"End Date",tooltip:"Number of days from now. Format: +/- number Eg: +7",placeholder:"+ or - with numbers eg: +7",rules:[{required:!0},{pattern:"[+-][\\d]+",message:"Invalid Format"}]})]})})]})}),xc=(n(954),z.a.Column),yc=function(){var e=Object(i.c)((function(e){return e.leaveTypes})).leaveTypes,t=Object(i.b)();Object(a.useEffect)((function(){t(ia())}),[t]);var n=Object(Ea.g)();return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(y.b,{style:{marginBottom:16},children:Object(Ta.jsx)(M.a,{onClick:function(){n("/leaveTypes/create")},children:"Create New Leave Type"})}),e.length?Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsxs)(z.a,{dataSource:e,rowKey:"_id",children:[Object(Ta.jsx)(xc,{title:"Code",dataIndex:"code"},"code"),Object(Ta.jsx)(xc,{title:"Name",dataIndex:"name"},"name"),Object(Ta.jsx)(xc,{title:"Count",dataIndex:"count"},"count"),Object(Ta.jsx)(xc,{title:"Action",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/leaveTypes/edit/".concat(t._id),children:"Edit"})})})}},"action")]}),Object(Ta.jsx)(M.a,{type:"secondary",htmlType:"button",children:Object(Ta.jsx)(U.b,{to:"/",children:"Back"})})]}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("br",{}),Object(Ta.jsx)(ga.a,{size:"large"})]})]})},vc=(n(955),z.a.Column),gc=function(){var e=Object(i.c)((function(e){return e.roles})).roles,t=Object(i.b)();Object(a.useEffect)((function(){t($r())}),[t]);var n=Object(Ea.g)();return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(y.b,{style:{marginBottom:16},children:Object(Ta.jsx)(M.a,{onClick:function(){n("/roles/create")},children:"Add Roles"})}),Object(Ta.jsx)("br",{}),e.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:e,rowKey:"_id",children:[Object(Ta.jsx)(vc,{title:"Roles",dataIndex:"name"},"name"),Object(Ta.jsx)(vc,{title:"Action",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"roles/edit/".concat(t._id),children:"Edit"})})})}},"action")]})}):Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(ga.a,{size:"large"})}),Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/",children:"Back"})})]})},Tc=(n(956),"LEAVE_VIEW_ALL"),wc="LEAVE_APPROVE",Dc="ROLES_ASSIGN",_c=function(){var e=Object(Ea.h)().id,t=Object(i.c)((function(e){return e.roles})).role,n=fr.a.useForm(),r=Object(f.a)(n,1)[0],c=Object(i.b)();return Object(a.useEffect)((function(){e&&(c(function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:qt}),t.next=4,Oe(e);case 4:a=t.sent,r=a.data,n({type:Mt,payload:r}),n({type:zt}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:Vt,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(e)),r.setFieldsValue(Object(p.a)({},t)))}),[c,e]),Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:e?"Edit Role":"Create Role"}),Object(Ta.jsxs)(fr.a,{form:r,name:"basic",labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},onFinish:function(t){c(e?function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:qt}),n.next=4,me(e,t);case 4:r=n.sent,c=r.data,a({type:Yt,payload:c}),a({type:zt}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:Vt,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(e,Object(p.a)({},t)):function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:qt}),t.next=4,c=e,J.post("/roles",c);case 4:a=t.sent,r=a.data,n({type:Ft,payload:r}),n({type:zt}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:Vt,error:t.t0});case 13:case"end":return t.stop()}var c}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(Object(p.a)({},t)))},autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{label:"Name",name:"name",rules:[{required:!0}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter "})}),Object(Ta.jsx)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:Object(Ta.jsxs)(y.b,{children:[Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Ta.jsx)(M.a,{type:"secondary",htmlType:"button",children:Object(Ta.jsx)(U.b,{to:"/roles",children:"Back"})})]})})]})]})},Ic=n(154),kc=(n(489),n(957),n(959),new(n(537).a)({instanceId:"0b883b28-92f8-4afc-9f97-ffebaa950fc8"})),Ec=(P.a.Text,fr.a.useForm),Cc=function(e){var t=e.user,n=Ec(),r=Object(f.a)(n,1)[0],c=_a()(),s=Object(i.b)(),o=(Object(Ea.g)(),function(){var e=Object(K.a)(B.a.mark((function e(n){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a={}).email=n.settings.includes("email"),a.notification=n.settings.includes("notification"),!1,a.notification?kc.start().then((function(e){return e.getDeviceId()})).catch((function(e){!0,pr.a.error({content:"Can't enable push notification. Please check if u disable it for this site"}),a.notification=!1,console.log(a),s(yr(t._id,a))})).then((function(){kc.addDeviceInterest(t._id.toString()),s(yr(t._id,a)),pr.a.success({content:"Settings Updated"})})):(kc.stop(),s(yr(t._id,a)),pr.a.success({content:"Settings Updated"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(a.useEffect)((function(){r.setFieldsValue({settings:Object.keys(t.settings).filter((function(e){return t.settings[e]}))})}),[]),Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:"Profile"}),Object(Ta.jsxs)(Y.b,{title:Object(Ta.jsx)(Jr.a,{orientation:"left",children:"Details"}),bordered:!0,layout:c.md?"horizontal":"vertical",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},children:[Object(Ta.jsx)(Y.b.Item,{label:"Emoployee ID",children:t.emp_id}),Object(Ta.jsx)(Y.b.Item,{label:"First Name",children:t.first_name}),Object(Ta.jsx)(Y.b.Item,{label:"Last Name",children:t.last_name}),Object(Ta.jsx)(Y.b.Item,{label:"Department",children:t.department.name}),Object(Ta.jsx)(Y.b.Item,{label:"Employment Date",children:da()(t.employment_date).format("YYYY-MM-DD")}),Object(Ta.jsx)(Y.b.Item,{label:"Roles",children:t.roles.name})]}),Object(Ta.jsx)(Y.b,{title:Object(Ta.jsx)(Jr.a,{orientation:"left",children:"Leave Balance"}),bordered:!0,children:t.leaveCount.map((function(e){return Object(Ta.jsx)(Y.b.Item,{label:e.leaveType.name,children:e.count},e.leaveType._id)}))}),Object(Ta.jsx)(Jr.a,{orientation:"left",children:"Settings"}),Object(Ta.jsxs)(fr.a,{form:r,name:"basic",onFinish:o,autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{name:"settings",help:Object(Ta.jsx)(H.a,{description:Object(Ta.jsxs)(P.a.Paragraph,{children:["Notification currently not supported on Safari Browsers. Check if u blocked the site notification if u enabled it but no notification is showing.",Object(Ta.jsx)(P.a.Link,{href:"https://www.popsci.com/story/diy/how-to-manage-browser-notifications/",target:"_blank",children:"Click here"})]})}),children:Object(Ta.jsx)(Ic.a.Group,{children:Object(Ta.jsxs)(L.a,{children:[Object(Ta.jsx)(N.a,{span:24,children:Object(Ta.jsx)(Ic.a,{value:"notification",children:"Notification"})}),Object(Ta.jsx)(N.a,{span:24,children:Object(Ta.jsx)(Ic.a,{value:"email",children:"Email"})})]})})}),Object(Ta.jsx)(fr.a.Item,{children:Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Save Settings"})})]}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("div",{style:{textAlign:"center",marginTop:"20px"},children:Object(Ta.jsx)(M.a,{type:"primary",children:Object(Ta.jsx)(U.b,{to:"/profile/changePassword",children:"Change Password"})})})]})},Ac=n(354),Sc=n(260),Rc=n(359),Pc=n(360),Lc=n(361),Nc=0,Fc=(new Date).toISOString().replace(/T.*$/,""),Yc=new Date("2021-10-03"),Hc=new Date("2021-10-08");Mc(),Mc(),Mc();function Mc(){return String(Nc++)}n(964);var qc=oc.a.useBreakpoint,zc=function(){var e=Object(i.b)(),t=qc(),n=Object(Ea.g)(),r=Object(a.createRef)(),c=Object(a.useState)({fromDate:da()(),toDate:da()()}),s=Object(f.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)({}),d=Object(f.a)(u,2),j=(d[0],d[1],Object(i.c)((function(e){return e.leaves}))),b=j.calendar,p=j.isLoading;j.error;Object(a.useEffect)((function(){p||(t.xs?r.current.getApi().changeView("listMonth"):r.current.getApi().changeView("dayGridMonth"))}),[t]);var O=function(){var t=Object(K.a)(B.a.mark((function t(n,a,r){var c,s;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=da()(n.start),s=da()(n.end),0!=o.fromDate.diff(c)&&0!=o.toDate.diff(s)&&(l({fromDate:c,toDate:s}),e(ea({fromDate:c,toDate:s}))),a(b);case 4:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}();return Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)("div",{className:"demo-app",children:Object(Ta.jsx)("div",{className:"demo-app-main",children:Object(Ta.jsx)(ga.a,{spinning:p,children:Object(Ta.jsx)(Ac.a,{ref:r,plugins:[Sc.b,Rc.a,Pc.a,Lc.a],headerToolbar:{left:"prevYear,prev,next,nextYear",center:"title",right:"today dayGridMonth,listMonth"},initialView:"dayGridMonth",dayMaxEvents:!0,weekends:!0,businessHours:{daysOfWeek:[1,2,3,4,5]},events:O,eventContent:function(e){return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("b",{children:e.timeText}),Object(Ta.jsx)("i",{children:e.event.title}),Object(Ta.jsx)("i",{children:e.event.extendedProps.emp_id})]})},eventClick:function(e){"background"!=e.event.display&&n(e.event.url)}})})})})})};var Vc=function(e){var t=e.children,n=e.user,a=e.requiredPermissions,r=void 0===a?null:a,c=e.matchAllPermissions,s=!0;return r&&(s=void 0!==c&&c?r.every((function(e){return-1!==[wc,Dc,Tc].indexOf(e)})):[wc,Dc,Tc].some((function(e){return-1!==r.indexOf(e)}))),n&&s?t:Object(Ta.jsx)(Ea.a,{to:"/auth",replace:!0})};for(var Uc=function(e){var t=e.children;return e.user?Object(Ta.jsx)(Ea.a,{to:"/home",replace:!0}):t},Gc=(n(965),wr.a.Option,function(){Object(a.useEffect)((function(){!function(){if("Notification"in window)if("granted"===Notification.permission)new Notification("Hi there!");else"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){if("granted"===e)new Notification("Hi there!")}));else alert("This browser does not support desktop notification")}()}),[]);return Object(Ta.jsx)(Ta.Fragment,{})}),Bc=function(){var e=Object(Ea.g)(),t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=(n[0],n[1],Object(i.b)()),c=Object(i.c)((function(e){return e.auth})),s=(c.isLoading,c.error,function(){var t=Object(K.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(hr({email:n.email})).then((function(){pr.a.success({content:"Email sent!",onOk:function(){e("/auth")}})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:"Reset Password"}),Object(Ta.jsxs)(fr.a,{name:"basic",labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},onFinish:s,autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{label:"Email",name:"email",initialValue:"",rules:[{required:!0,type:"email",whitespace:!0}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter email"})}),Object(Ta.jsx)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}),Object(Ta.jsx)("div",{style:{textAlign:"center"},children:Object(Ta.jsx)(U.b,{to:"/auth",children:"Back to Login"})})]})},Kc=n(531),Wc=function(e){e.socket,e.user;var t,n=Object(Ea.g)(),r=Object(i.c)((function(e){return e.holidays})),c=r.holidays,s=r.isLoading,o=(r.success,r.error,da()()),l=Object(i.b)(),u=Object(a.useState)(o.year().toString()),d=Object(f.a)(u,2),j=d[0],b=d[1];Object(a.useEffect)((function(){l(Cr(j))}),[l,j]);var p=function(){var e=Object(K.a)(B.a.mark((function e(t,n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(Ar(t,n)),pr.a.success({content:"Holiday Deleted"});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return s?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:1,children:"Holidays"}),Object(Ta.jsx)(Tr.a,{onChange:function(e,t){b(t)},picker:"year",defaultValue:o}),Object(Ta.jsx)(M.a,{children:Object(Ta.jsxs)(U.b,{to:"/holidays/create/".concat(j),children:["Add New Holiday for ",j]})}),(null===c||void 0===c||null===(t=c.lists)||void 0===t?void 0:t.length)?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:c.lists,rowKey:"_id",style:{overflowX:"scroll"},children:[Object(Ta.jsx)(z.a.Column,{title:"Title",dataIndex:"title"},"title"),Object(Ta.jsx)(z.a.Column,{title:"Start Date",dataIndex:"startDate",render:function(e,t){return da()(e).format("YYYY-MM-DD")}},"startDate"),Object(Ta.jsx)(z.a.Column,{title:"End Date",dataIndex:"endDate",render:function(e,t){return da()(e).format("YYYY-MM-DD")}},"endDate"),Object(Ta.jsx)(z.a.Column,{title:"Action",dataIndex:"option",render:function(e,t){return Object(Ta.jsxs)(y.b,{size:"middle",children:[Object(Ta.jsx)(M.a,{type:"primary",onClick:function(){return n("/holidays/edit/".concat(j,"/").concat(t._id))},children:"Edit"}),Object(Ta.jsx)(Kc.a,{title:"Are you sure you want to delete this holiday?",onConfirm:function(){return p(j,t._id)},okText:"Yes",cancelText:"No",children:Object(Ta.jsx)(M.a,{type:"primary",danger:!0,children:"Delete"})})]},t._id)}})]})}):Object(Ta.jsx)(q.a,{})]})},Jc=(n(966),P.a.Title),Qc=function(){var e=Object(i.b)(),t=Object(Ea.g)(),n=Object(Ea.h)(),r=n.year,c=n.id,s=fr.a.useForm(),o=Object(f.a)(s,1)[0],l=Object(a.useState)(!1),u=Object(f.a)(l,2),d=u[0],j=u[1],b=Object(i.c)((function(e){return e.holidays}));b.holiday,b.isLoading,b.success,b.error;Object(a.useEffect)((function(){c&&(j(!0),e(function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:Qt}),n.next=4,ve(e,t);case 4:return r=n.sent,c=r.data,a({type:Jt,payload:c}),a({type:$t}),n.abrupt("return",c);case 11:n.prev=11,n.t0=n.catch(0),a({type:Xt,error:n.t0});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(r,c)).then((function(e){j(!1);var t=e[0];o.setFieldsValue(Object(p.a)(Object(p.a)({},t),{},{"range-picker":[da()(t.startDate),da()(t.endDate)]}))})))}),[e,c]);return d?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(Jc,{level:2,style:{textAlign:"center"},children:c?"Edit Holiday":"Create Holiday"}),Object(Ta.jsxs)(fr.a,{labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},form:o,name:"basic",onFinish:function(n){var a,s=n["range-picker"],i=s[0],o=s[1];c?(e(function(e,t,n){return function(){var a=Object(K.a)(B.a.mark((function a(r){var c,s;return B.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:Qt}),a.next=4,ye(e,t,n);case 4:return c=a.sent,s=c.data,r({type:Kt,payload:s}),r({type:Zt,payload:{success:"Update success"}}),r({type:$t}),a.abrupt("return",s);case 12:a.prev=12,a.t0=a.catch(0),r({type:Xt,error:a.t0});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(r,c,{title:n.title,description:n.description,startDate:i,endDate:o})),pr.a.success({content:"Holiday Updated",onOk:function(){t("/holidays")}})):(e((a={year:r,holiday:{title:n.title,description:n.description,startDate:i,endDate:o}},function(){var e=Object(K.a)(B.a.mark((function e(t){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Qt}),e.next=4,xe(a);case 4:n=e.sent,r=n.data,t({type:Gt,payload:r}),t({type:Zt,payload:{success:"Create success"}}),t({type:$t}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Xt,error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())),pr.a.success({content:"Holiday created",onOk:function(){t("/holidays")}}))},children:[Object(Ta.jsx)(fr.a.Item,{label:"Title",name:"title",rules:[{required:!0,whitespace:!0}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter title"})}),Object(Ta.jsx)(fr.a.Item,{label:"Description",name:"description",rules:[{whitespace:!0}],children:Object(Ta.jsx)(Or.a.TextArea,{rows:4,placeholder:"Please enter description (optional)"})}),Object(Ta.jsx)(fr.a.Item,{label:"Date",name:"range-picker",rules:[{required:!0}],children:Object(Ta.jsx)(Tr.a.RangePicker,{})}),Object(Ta.jsxs)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:[Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Ta.jsx)(M.a,{onClick:function(){return t(-1)},children:"Back"})]})]})]})},$c=n(362),Xc=n(564),Zc=n(224),es=n(44),ts=n(504),ns=function(e,t){return isNaN(e)&&isNaN(t)?(e||"").localeCompare(t||""):e-t},as={0:"close",1:"running",2:"online",3:"error"},rs=[],cs=["\u4ed8\u5c0f\u5c0f","\u66f2\u4e3d\u4e3d","\u6797\u4e1c\u4e1c","\u9648\u5e05\u5e05","\u517c\u67d0\u67d0"],ss=0;ss<100;ss+=1)rs.push({key:ss,name:"AppName",containers:Math.floor(20*Math.random()),creator:cs[Math.floor(Math.random()*cs.length)],status:as[Math.floor(10*Math.random())%4],createdAt:Date.now()-Math.floor(2e3*Math.random()),money:Math.floor(2e3*Math.random())*ss,progress:Math.ceil(100*Math.random())+1,memo:ss%2===1?"\u5f88\u957f\u5f88\u957f\u5f88\u957f\u5f88\u957f\u5f88\u957f\u5f88\u957f\u5f88\u957f\u7684\u6587\u5b57\u8981\u5c55\u793a\u4f46\u662f\u8981\u7559\u4e0b\u5c3e\u5df4":"\u7b80\u77ed\u5907\u6ce8\u6587\u6848"});Ta.Fragment,es.a,Xc.a;var is=[{title:"Index",dataIndex:"index",valueType:"indexBorder",key:"index",width:48},{title:"Title",dataIndex:"title",key:"title",render:function(e,t){return"".concat(t.title," ").concat(t.leaveType)},sorter:function(e,t){return ns(e.title,t.title)}},{title:"Start Date",dataIndex:"fromDate",key:"fromDate",valueType:"date",render:function(e,t){return da()(e).format("y-MM-DD")},sorter:function(e,t){return ns(e.fromDate,t.fromDate)}}],os=Object(Ta.jsxs)(ur.a,{children:[Object(Ta.jsx)(ur.a.Item,{children:"1st item"},"1"),Object(Ta.jsx)(ur.a.Item,{children:"2nd item"},"2"),Object(Ta.jsx)(ur.a.Item,{children:"3rd item"},"3")]}),ls=function(){var e=Object(i.c)((function(e){return e.leaves})).leaves,t=Object(a.useState)(e),n=Object(f.a)(t,2),r=n[0],c=(n[1],Object(a.useRef)());return Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(Vr.a,{columns:is,actionRef:c,request:function(e,t,n){var a=r;return n&&Object.keys(n).length>0&&(a=a.filter((function(e){return Object.keys(n).some((function(t){return!n[t]||!!n[t].includes("".concat(e[t]))}))}))),e&&Object.keys(e).length>0&&(a=a.filter((function(t){return Object.keys(e).every((function(n){return!e[n]||("pageSize"==n||"current"==n||("all"==e[n]||-1!=t[n].search(new RegExp(".*"+e[n]+".*","gi"))))}))}))),Promise.resolve({data:a,success:!0})},rowKey:"key",pagination:{pageSize:10,showQuickJumper:!0},search:{layout:"vertical",defaultCollapsed:!1},dateFormatter:"string",toolbar:{title:"\u9ad8\u7ea7\u8868\u683c",tooltip:"\u8fd9\u662f\u4e00\u4e2a\u6807\u9898\u63d0\u793a"},toolBarRender:function(){return[Object(Ta.jsx)(M.a,{danger:!0,children:"\u5371\u9669\u6309\u94ae"},"danger"),Object(Ta.jsx)(M.a,{children:"\u67e5\u770b\u65e5\u5fd7"},"show"),Object(Ta.jsx)(M.a,{type:"primary",children:Object(Ta.jsx)(U.b,{to:"/leaves/create",children:"Apply Leave"})},"primary"),Object(Ta.jsx)(Za.a,{overlay:os,children:Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(Zc.a,{})})},"menu")]}})})},us=(n(968),function(e){e.socket;var t=e.user,n=_a()(),r=Object(a.useState)(!0),c=Object(f.a)(r,2),s=(c[0],c[1],Object(i.c)((function(e){return e.trainings}))),o=s.trainings,l=s.upcomingTraining,u=s.isLoading,d=(Object(Ea.g)(),Object(i.b)()),j=0,b=t.trainingHours,p=t.completedHours,O=b-p,m=p/b,h=[{name:"Hours Completed",value:p},{name:"Hours Required",value:O=O<0?"":O}],x=["#0088FE","#de0b0b"];Object(a.useEffect)((function(){var e;d((e=t._id,function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:rn}),t.next=4,Ce(e);case 4:a=t.sent,r=a.data,n({type:fn,payload:r}),n({type:cn}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:sn,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}())),"staff"!=t.roles.name&&d(ca(t.roles.name,t._id,t.department.name))}),[d]);var v,g=Object(ka.a)(o);try{for(g.s();!(v=g.n()).done;){"Pending"==v.value.status&&j++}}catch(T){g.e(T)}finally{g.f()}return u?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,children:"Current Training Status"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,md:12,lg:16,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsxs)(Y.b,{title:"Profile Details",bordered:!0,layout:n.md?"horizontal":"vertical",column:{sm:2,xs:1},children:[Object(Ta.jsx)(Y.b.Item,{label:"Name",span:2,children:"".concat(t.first_name," ").concat(t.last_name)}),Object(Ta.jsx)(Y.b.Item,{label:"Department",span:2,children:t.department.name}),Object(Ta.jsx)(Y.b.Item,{label:"Total Training Hours Required",span:1,children:t.trainingHours}),Object(Ta.jsx)(Y.b.Item,{label:"Training Hours Completed",span:1,children:t.completedHours})]}),Object(Ta.jsx)("br",{}),m<=.25?Object(Ta.jsx)(H.a,{message:"Low Training Hours Completed",description:"Please participate in more trainings in order to reach your quota!",type:"error"}):m<.75?Object(Ta.jsx)(H.a,{message:"Moderate Training Hours Completed",description:"Keep up the good work! Participate in more trainings to reach your quota.",type:"warning"}):m<1?Object(Ta.jsx)(H.a,{message:"Great Training Hours Completed",description:"Almost there! Keep participating in trainings to reach your quota!",type:"success"}):Object(Ta.jsx)(H.a,{message:"Training Quota Reached",description:"Congratulations! You have reached your training quota!",type:"success"})]})}),Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,md:12,lg:8,children:Object(Ta.jsx)(F.a,{bordered:!0,children:Object(Ta.jsx)(ja.a,{minWidth:200,minHeight:300,children:Object(Ta.jsxs)(xa.a,{children:[Object(Ta.jsx)(ya.a,{data:h,innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:3,startAngle:-270,dataKey:"value",isAnimationActive:!1,label:function(e){var t=e.x,n=e.y,a=e.value;return Object(Ta.jsx)("text",{x:t,y:n,fill:"black",textAnchor:"end",alignmentBaseline:"auto",children:a})},labelLine:!1,children:h.map((function(e,t){return Object(Ta.jsx)(fa.a,{fill:x[t%x.length]},"cell-".concat(t))}))}),Object(Ta.jsx)(ha.a,{}),Object(Ta.jsx)(va.a,{})]})})})})]}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)(P.a.Title,{level:2,children:"Quick Overview"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:"staff"!=t.roles.name?12:24,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsx)("div",{style:{textAlign:"right"},children:Object(Ta.jsx)(M.a,{type:"primary",shape:"round",children:Object(Ta.jsx)(U.b,{to:"/training/history",children:"To Training History"})})}),Object(Ta.jsx)("b",{children:"Upcoming Trainings:"}),l&&(l.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:l,rowKey:"_id",children:[Object(Ta.jsx)(z.a.Column,{title:"Organizer",dataIndex:"organizer"},"organizer"),Object(Ta.jsx)(z.a.Column,{title:"Title",dataIndex:"title"},"title"),Object(Ta.jsx)(z.a.Column,{title:"Type",dataIndex:"trainingType"},"trainingType"),Object(Ta.jsx)(z.a.Column,{title:"Date",dataIndex:"date",render:function(e,t){return"".concat(da()(t.fromDate).format("YYYY-MM-DD")," - ").concat(da()(t.toDate).format("YYYY-MM-DD"))}},"date"),Object(Ta.jsx)(z.a.Column,{title:"Action",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(U.b,{to:"/training/view/".concat(t._id),children:"View"})},t._id)}},"action")]})}):Object(Ta.jsx)(q.a,{}))]})}),"staff"!=t.roles.name&&Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsx)(F.a,{bordered:!0,children:Object(Ta.jsxs)(y.b,{wrap:!0,align:"baseline",style:{display:"flex",justifyContent:"space-between"},children:[Object(Ta.jsxs)(P.a.Text,{strong:!0,children:["Pending External Training Requests:"," ".concat(j)]}),Object(Ta.jsx)(M.a,{type:"primary",shape:"round",children:Object(Ta.jsx)(U.b,{to:"/training/extList",children:"To Requests"})})]})})})]})]})}),ds=n(264),js=(n(969),Or.a.TextArea),bs=(Tr.a.RangePicker,wr.a.Option,P.a.Text,function(e){e.socket;var t=e.user,n=Object(Ea.h)().id,r=Object(Ea.g)(),c=Object(i.c)((function(e){return e.trainings})),s=(c.isLoading,c.training),o=fr.a.useForm(),l=Object(f.a)(o,1)[0],u=Object(a.useState)(null),d=Object(f.a)(u,2),j=(d[0],d[1]),b=Object(i.b)();return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:"Create Internal Training"}),Object(Ta.jsxs)(fr.a,{form:l,name:"basic",labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},onFinish:function(e){j(null);var n=new FormData;if(e.upload){var a,c=Object(ka.a)(e.upload);try{for(c.s();!(a=c.n()).done;){var s=a.value;s.originFileObj&&n.append("files",s.originFileObj)}}catch(m){c.e(m)}finally{c.f()}}var i=e.date,o=i[0],l=i[1],u=e.time,d=u[0],p=u[1],O={user:t._id,department:t.department._id,organizer:e.organizer,title:e.title,description:e.description,fromDate:o.format("YYYY-MM-DD"),toDate:l.format("YYYY-MM-DD"),fromTime:d.format("HH:mm"),toTime:p.format("HH:mm"),duration:(da.a.duration(p.diff(d)).as("hours")*(da.a.duration(l.diff(o)).as("days")+1)).toFixed(2),trainingType:"Internal"};Object.entries(O).forEach((function(e){var t=Object(f.a)(e,2),a=t[0],r=t[1];n.append(a,r)})),b(ra(n)),pr.a.success({content:"Training successfully created.",onOk:function(){r("/training/home")}})},autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{label:"Organizer",name:"organizer",rules:[{required:!0,whitespace:!0,message:"Please enter an organizer!"}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter organizer"})}),Object(Ta.jsx)(fr.a.Item,{label:"Title",name:"title",rules:[{required:!0,whitespace:!0,message:"Please insert a title!"}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter title"})}),Object(Ta.jsx)(fr.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please input your training description!"}],children:Object(Ta.jsx)(js,{rows:4,placeholder:"Please enter training description"})}),Object(Ta.jsx)(fr.a.Item,{label:"Date",name:"date",rules:[{required:!0,message:"Please input your date!"}],children:Object(Ta.jsx)(Tr.a.RangePicker,{style:{width:"100%"},disabledDate:function(e){return e&&e<da()().endOf("day")}})}),Object(Ta.jsx)(fr.a.Item,{label:"Time",name:"time",rules:[{required:!0,message:"Please input your time!"}],children:Object(Ta.jsx)(ds.a.RangePicker,{style:{width:"100%"},format:"HH:mm",minuteStep:15,defaultValue:da()("00:00:00","HH:mm:ss")})}),Object(Ta.jsx)(fr.a.Item,{name:"upload",label:"Supporting Documents",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},children:Object(Ta.jsx)(Dr.a.Dragger,{name:"logo",listType:"picture",beforeUpload:function(e){return!1},customRequest:function(e){e.file;var t=e.onSuccess;setTimeout((function(){t("ok")}),0)},defaultFileList:function(){var e;return n?(null===s||void 0===s||null===(e=s.attachments)||void 0===e?void 0:e.map((function(e){return{uid:e.fileId,name:e.fileName,status:"done",url:e.filePath}})))||[]:null},showUploadList:{showDownloadIcon:!0,downloadIcon:function(e){return"done"==e.status?Object(Ta.jsx)(_r.a,{}):Object(Ta.jsx)(Ta.Fragment,{})},showRemoveIcon:!0,removeIcon:function(e){return"done"==e.status?Object(Ta.jsx)(Ta.Fragment,{}):Object(Ta.jsx)(Ir.a,{})}},children:Object(Ta.jsx)(M.a,{icon:Object(Ta.jsx)(kr.a,{}),children:"Click to upload"})})}),Object(Ta.jsx)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})}),ps=function(){var e=Object(i.c)((function(e){return e.trainings})),t=e.trainings,n=e.isLoading,r=Object(i.c)((function(e){return e.depts})).depts,c=(Object(Ea.g)(),[]),s=function(e){return e.filter((function(e){return"Approved"==e.status})).length},o=Object(i.b)();Object(a.useEffect)((function(){o(function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:rn}),e.next=4,J.get("/training");case 4:n=e.sent,a=n.data,t({type:nn,payload:a}),t({type:cn}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:sn,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),o(zr())}),[o]),r.forEach((function(e){c.push({text:e.name,value:e.name})}));var l=[{title:"Organizer",dataIndex:"organizer",key:"organizer",valueType:"text"},{title:"Title",dataIndex:"title",key:"title"},{title:"Start Date",dataIndex:"fromDate",key:"fromDate",valueType:"date",sorter:function(e,t){return da()(e.fromDate)-da()(t.fromDate)},render:function(e,t){return da()(t.fromDate).format("YYYY-MM-DD")}},{title:"Start Date to End Date",dataIndex:"fromDate",valueType:"dateRange",key:"somehtin",hideInTable:!0,search:{transform:function(e){return{startTime:e[0],endTime:e[1]}}}},{title:"End Date",dataIndex:"toDate",key:"toDate",valueType:"date",sorter:function(e,t){return da()(e.toDate)-da()(t.toDate)},render:function(e,t){return da()(t.toDate).format("YYYY-MM-DD")}},{title:"Time",dataIndex:"time",key:"time",hideInSearch:!0,render:function(e,t){return"".concat(t.fromTime," - ").concat(t.toTime)}},{title:"Total Duration(hours)",dataIndex:"duration",key:"duration",render:function(e,t){return da.a.utc(da.a.duration(t.duration,"hours").asMilliseconds()).format("H [hours] mm [minutes]")},hideInSearch:!0},{title:"Attendants",dataIndex:"attendants",key:"attendants",hideInSearch:!0,sorter:function(e,t){return s(e.attendants)-s(t.attendants)},render:function(e,t){return s(t.attendants)}},{title:"Action",key:"_id",valueType:"option",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(U.b,{to:"/training/view/".concat(t._id),children:"View"})},t._id)}}],d=Object(a.useRef)(),j=function(e){var t=new Array;if(e)for(var n=e.length-1;n>=0;n--)t.push(e[n]);return t}(t);return n?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("h2",{children:"Internal Training List"}),t.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(Vr.a,{columns:l,actionRef:d,request:function(e,t,n){var a=j;return e&&Object.keys(e).length>0&&(a=a.filter((function(t){return Object.keys(e).every((function(n){if(!e[n])return!0;if("pageSize"==n||"current"==n)return!0;if("all"==e[n])return!0;var a=t[n];if("user"==n)a="".concat(t.user.first_name," ").concat(t.user.last_name);else if("department"==n)a="".concat(t.department.name);else{if("startTime"==n)return da()(t.fromDate).diff(da()(e[n]))>=0;if("endTime"==n)return da()(t.toDate).diff(da()(e[n]),"days")<=0}return!a||-1!=a.search(new RegExp(".*"+e[n]+".*","gi"))}))}))),Promise.resolve({data:a,success:!0})},rowKey:"_id",pagination:{pageSize:10,showQuickJumper:!0},search:{labelWidth:"auto"},dateFormatter:"string",toolbar:{title:"Tips:",tooltip:"Use the search bar above or filter icons on the columns for easy record finding"}})})}):Object(Ta.jsx)(q.a,{})]})},fs=(n(970),function(e){e.socket;var t=e.user,n=_a()(),r=Object(i.c)((function(e){return e.trainings})),c=r.isLoading,s=r.training,o=Object(i.b)(),l=Object(Ea.g)(),u=Object(Ea.h)().id;Object(a.useEffect)((function(){o(function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:rn}),t.next=4,Te(e);case 4:a=t.sent,r=a.data,n({type:an,payload:r}),n({type:cn}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:sn,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(u))}),[u]);var d,j=function(e){o(function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:rn}),n.next=4,we(e,t);case 4:r=n.sent,c=r.data,a({type:ln,payload:c}),a({type:cn}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:sn,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(u,{user_id:e}))},b=function(e){o(function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:rn}),n.next=4,De(e,t);case 4:r=n.sent,c=r.data,a({type:un,payload:c}),a({type:cn}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:sn,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(u,{user_id:e}))},f=function(e){o(sa(u,Object(p.a)(Object(p.a)({},s),{},{status:e})))},O=function(e,t){var n=s.attendants.map((function(n){return n.user._id===e?{user:e,status:t}:n}));o(sa(u,Object(p.a)(Object(p.a)({},s),{},{attendants:n,extra:{user:e,status:t}})))};return s?c?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsxs)(Y.b,{style:{marginBottom:16},title:"Training Info",bordered:!0,layout:n.md?"horizontal":"vertical",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},children:[Object(Ta.jsx)(Y.b.Item,{label:"Training Type",span:3,children:s.trainingType}),"External"==s.trainingType?Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(Y.b.Item,{label:"Requester Name",span:3,children:"".concat(s.user.first_name," ").concat(s.user.last_name)}),Object(Ta.jsx)(Y.b.Item,{label:"Requester Department",span:3,children:"".concat(s.department.name)}),Object(Ta.jsx)(Y.b.Item,{label:"Organizer",span:3,children:s.organizer}),Object(Ta.jsx)(Y.b.Item,{label:"Course Name",span:3,children:s.title}),Object(Ta.jsx)(Y.b.Item,{label:"Reason for Attending",span:3,children:s.description})]}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(Y.b.Item,{label:"Organizer",span:3,children:s.organizer}),Object(Ta.jsx)(Y.b.Item,{label:"Title",span:3,children:s.title}),Object(Ta.jsx)(Y.b.Item,{label:"Description",span:3,children:s.description})]}),Object(Ta.jsx)(Y.b.Item,{label:"Start Date",span:2,children:da()(s.fromDate).format("YYYY-MM-DD")}),Object(Ta.jsx)(Y.b.Item,{label:"End Date",span:2,children:da()(s.toDate).format("YYYY-MM-DD")}),Object(Ta.jsx)(Y.b.Item,{label:"Time",span:3,children:"".concat(s.fromTime," - ").concat(s.toTime)}),Object(Ta.jsx)(Y.b.Item,{label:"Total Duration",span:3,children:(d=s.duration,da.a.duration(d,"hours").asDays()>=1?Math.floor(d)+da.a.utc(da.a.duration(d,"hours").asMilliseconds()).format(" [hours] mm [minutes]"):da.a.utc(da.a.duration(d,"hours").asMilliseconds()).format("H [hours] mm [minutes]"))}),"Internal"==s.trainingType?Object(Ta.jsx)(Y.b.Item,{label:"Attendants",span:3,children:0!=s.attendants.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(Ja.b,{size:"small",split:"true",dataSource:s.attendants,renderItem:function(e){return Object(Ta.jsx)(Ja.b.Item,{children:Object(Ta.jsxs)(y.b,{size:"large",children:["".concat(e.user.first_name," ").concat(e.user.last_name),Object(Ta.jsx)(Ua.a,{status:"Pending"==e.status?"processing":"Approved"==e.status?"success":"error",text:e.status}),"admin"==t.roles.name&&"Pending"==e.status&&Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(M.a,{className:"btn-success",onClick:function(){return O(e.user._id,"Approved")},children:"Approve"}),Object(Ta.jsx)(M.a,{danger:!0,onClick:function(){return O(e.user._id,"Rejected")},children:"Reject"})]})]})})}})}):Object(Ta.jsx)("div",{children:"No data"})}):Object(Ta.jsx)(Y.b.Item,{label:"Course Fee",span:3,children:"RM ".concat(s.fee)}),Object(Ta.jsx)(Y.b.Item,{label:"Supporting Documents",span:3,children:0!=s.attachments.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(Dr.a,{className:"showFiles",defaultFileList:function(){var e;return u?(null===s||void 0===s||null===(e=s.attachments)||void 0===e?void 0:e.map((function(e){return{uid:e.fileId,name:e.fileName,status:"done",url:e.filePath}})))||[]:null},showUploadList:{showDownloadIcon:!0,showRemoveIcon:!1}})}):Object(Ta.jsx)("div",{children:"None"})}),"External"==s.trainingType&&Object(Ta.jsx)(Y.b.Item,{label:"Status",span:3,children:Object(Ta.jsx)(Ua.a,{status:"Pending"==s.status?"processing":"Approved"==s.status?"success":"error",text:s.status})})]}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsxs)(y.b,{children:[Object(Ta.jsx)(M.a,{onClick:function(){return l(-1)},children:"Back"}),!s.attendants.some((function(e){return e.user._id===t._id}))&&"Internal"==s.trainingType&&da()(s.fromDate)>da()()?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(M.a,{type:"success",onClick:function(){return j(t._id)},children:"Join Training"})}):"Internal"==s.trainingType&&da()(s.fromDate)>da()()?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(M.a,{type:"primary",danger:!0,onClick:function(){return b(t._id)},children:"Cancel Attendance"})}):s.user._id!=t._id&&"External"==s.trainingType&&"Pending"==s.status&&Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(M.a,{type:"success",onClick:function(){return f("Approved")},children:"Approve"}),Object(Ta.jsx)(M.a,{type:"primary",danger:!0,onClick:function(){return f("Rejected")},children:"Reject"})]})]})]}):null}),Os=Or.a.TextArea,ms=(Tr.a.RangePicker,wr.a.Option,P.a.Text,function(){var e=Object(Ea.h)().id,t=Object(Ea.g)(),n=JSON.parse(localStorage.getItem("profile")).result,r=Object(i.c)((function(e){return e.trainings})),c=(r.isLoading,r.training),s=fr.a.useForm(),o=Object(f.a)(s,1)[0],l=Object(a.useState)(null),u=Object(f.a)(l,2),d=(u[0],u[1]),j=Object(i.b)(),b=function(){var e=Object(K.a)(B.a.mark((function e(a){var r,c,s,i,o,l,u,b,p,O,m;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(null),r=new FormData,a.upload){c=Object(ka.a)(a.upload);try{for(c.s();!(s=c.n()).done;)(i=s.value).originFileObj&&r.append("files",i.originFileObj)}catch(h){c.e(h)}finally{c.f()}}return o=a.date,l=o[0],u=o[1],b=a.time,p=b[0],O=b[1],m={user:n._id,department:n.department._id,organizer:a.organizer,title:a.title,description:a.description,fromDate:l.format("YYYY-MM-DD"),toDate:u.format("YYYY-MM-DD"),fromTime:p.format("HH:mm"),toTime:O.format("HH:mm"),duration:(da.a.duration(O.diff(p)).as("hours")*(da.a.duration(u.diff(l)).as("days")+1)).toFixed(2),trainingType:"External",status:"Pending",fee:a.fee},Object.entries(m).forEach((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];r.append(n,a)})),e.next=13,j(ra(r));case 13:pr.a.success({content:"Request successfully submitted. You can check request status at Training History.",onOk:function(){t("/training/home")}});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:"External Training Request"}),Object(Ta.jsxs)(fr.a,{form:o,name:"basic",labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},onFinish:b,autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{label:"Course Name",name:"title",rules:[{required:!0,whitespace:!0}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter course name"})}),Object(Ta.jsx)(fr.a.Item,{label:"Organizer",name:"organizer",rules:[{required:!0,whitespace:!0}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter organizer"})}),Object(Ta.jsx)(fr.a.Item,{label:"Reason for attending",name:"description",rules:[{required:!0,whitespace:!0}],children:Object(Ta.jsx)(Os,{rows:4,placeholder:"Please enter reason for attending"})}),Object(Ta.jsx)(fr.a.Item,{label:"Date",name:"date",rules:[{required:!0}],children:Object(Ta.jsx)(Tr.a.RangePicker,{style:{width:"100%"},disabledDate:function(e){return e&&e<da()().endOf("day")}})}),Object(Ta.jsx)(fr.a.Item,{label:"Time",name:"time",rules:[{required:!0}],children:Object(Ta.jsx)(ds.a.RangePicker,{style:{width:"100%"},format:"HH:mm",minuteStep:15,defaultValue:da()("00:00:00","HH:mm:ss")})}),Object(Ta.jsx)(fr.a.Item,{label:"Course Fee(RM)",name:"fee",rules:[{required:!0}],children:Object(Ta.jsx)(Qr.a,{min:0,style:{width:"100%"},placeholder:"Please enter course fee"})}),Object(Ta.jsx)(fr.a.Item,{name:"upload",label:"Supporting Documents",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},rules:[{required:!0,message:"Please provide documents for workshop details!"}],children:Object(Ta.jsx)(Dr.a.Dragger,{name:"logo",listType:"picture",beforeUpload:function(e){return!1},customRequest:function(e){e.file;var t=e.onSuccess;setTimeout((function(){t("ok")}),0)},defaultFileList:function(){var t;return e?(null===c||void 0===c||null===(t=c.attachments)||void 0===t?void 0:t.map((function(e){return{uid:e.fileId,name:e.fileName,status:"done",url:e.filePath}})))||[]:null},showUploadList:{showDownloadIcon:!0,downloadIcon:function(e){return"done"==e.status?Object(Ta.jsx)(_r.a,{}):Object(Ta.jsx)(Ta.Fragment,{})},showRemoveIcon:!0,removeIcon:function(e){return"done"==e.status?Object(Ta.jsx)(Ta.Fragment,{}):Object(Ta.jsx)(Ir.a,{})}},children:Object(Ta.jsx)(M.a,{icon:Object(Ta.jsx)(kr.a,{}),children:"Click to upload"})})}),Object(Ta.jsx)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})}),hs=function(){var e=Object(i.c)((function(e){return e.trainings})),t=e.trainings,n=e.isLoading,r=Object(i.c)((function(e){return e.depts})).depts,c=JSON.parse(localStorage.getItem("profile")).result,s=(Object(Ea.g)(),Object(i.b)());Object(a.useEffect)((function(){s(ca(c.roles.name,c._id,c.department.name)),s(zr())}),[s]);var o=[];r.forEach((function(e){o.push({text:e.name,value:e.name})}));var l=[{title:"Requester Name",dataIndex:"user",key:"user",valueType:"text",render:function(e,t){return"".concat(e.first_name," ").concat(e.last_name)}},{title:"Requester Department",dataIndex:["department","name"],key:"department",hideInSearch:!0,filters:o,onFilter:function(e,t){return 0===t.department.name.indexOf(e)}},{title:"Organizer",dataIndex:"organizer",key:"organizer",valueType:"text"},{title:"Title",dataIndex:"title",key:"title"},{title:"Start Date",dataIndex:"fromDate",key:"fromDate",valueType:"date",sorter:function(e,t){return da()(e.fromDate)-da()(t.fromDate)},render:function(e,t){return da()(t.fromDate).format("YYYY-MM-DD")}},{title:"Start Date to End Date",dataIndex:"fromDate",valueType:"dateRange",key:"somehtin",hideInTable:!0,search:{transform:function(e){return{startTime:e[0],endTime:e[1]}}}},{title:"End Date",dataIndex:"toDate",key:"toDate",valueType:"date",sorter:function(e,t){return da()(e.toDate)-da()(t.toDate)},render:function(e,t){return da()(t.toDate).format("YYYY-MM-DD")}},{title:"Time",dataIndex:"time",key:"time",hideInSearch:!0,render:function(e,t){return"".concat(t.fromTime," - ").concat(t.toTime)}},{title:"Total Duration",dataIndex:"duration",key:"duration",render:function(e,t){return n=t.duration,da.a.duration(n,"hours").asDays()>=1?Math.floor(n)+da.a.utc(da.a.duration(n,"hours").asMilliseconds()).format(" [hours] mm [minutes]"):da.a.utc(da.a.duration(n,"hours").asMilliseconds()).format("H [hours] mm [minutes]");var n},hideInSearch:!0},{title:"Status",dataIndex:"status",key:"status",hideInSearch:!0,filters:[{text:"Pending",value:"Pending"},{text:"Approved",value:"Approved"},{text:"Rejected",value:"Rejected"}],onFilter:function(e,t){return 0===t.status.indexOf(e)},render:function(e,t){return Object(Ta.jsx)(Ua.a,{status:"Pending"==t.status?"processing":"Approved"==t.status?"success":"error",text:t.status})}},{title:"Action",key:"_id",valueType:"option",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(U.b,{to:"/training/view/".concat(t._id),children:"View"})},t._id)}}],d=Object(a.useRef)(),j=function(e){var t=new Array;if(e)for(var n=e.length-1;n>=0;n--)t.push(e[n]);return t}(t);return n?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("h2",{children:"Received External Training Requests"}),t.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(Vr.a,{columns:l,actionRef:d,request:function(e,t,n){var a=j;return e&&Object.keys(e).length>0&&(a=a.filter((function(t){return Object.keys(e).every((function(n){if(!e[n])return!0;if("pageSize"==n||"current"==n)return!0;if("all"==e[n])return!0;var a=t[n];if("user"==n)a="".concat(t.user.first_name," ").concat(t.user.last_name);else if("department"==n)a="".concat(t.department.name);else{if("startTime"==n)return da()(t.fromDate).diff(da()(e[n]))>=0;if("endTime"==n)return da()(t.toDate).diff(da()(e[n]),"days")<=0}return!a||-1!=a.search(new RegExp(".*"+e[n]+".*","gi"))}))}))),Promise.resolve({data:a,success:!0})},rowKey:"_id",pagination:{pageSize:10,showQuickJumper:!0},search:{labelWidth:"auto"},dateFormatter:"string",toolbar:{title:"Tips:",tooltip:"Use the search bar above or filter icons on the columns for easy record finding"}})})}):Object(Ta.jsx)(q.a,{})]})},xs=function(e){e.socket;var t=e.user,n=Object(i.c)((function(e){return e.trainings})),r=n.trainingHistory,c=n.extTrainings,s=n.isLoading,o=Object(i.c)((function(e){return e.depts})).depts,l=(Object(Ea.g)(),Object(i.b)());Object(a.useEffect)((function(){var e;l((e=t._id,function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:rn}),t.next=4,ke(e);case 4:a=t.sent,r=a.data,n({type:bn,payload:r}),n({type:cn}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:sn,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}())),l(function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:rn}),t.next=4,Ee(e);case 4:a=t.sent,r=a.data,n({type:pn,payload:r}),n({type:cn}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:sn,error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t._id)),l(zr())}),[l]);var d=[],j=function(e){return e.filter((function(e){return"Approved"==e.status})).length},b=function(e){return da.a.duration(e,"hours").asDays()>=1?Math.floor(e)+da.a.utc(da.a.duration(e,"hours").asMilliseconds()).format(" [hours] mm [minutes]"):da.a.utc(da.a.duration(e,"hours").asMilliseconds()).format("H [hours] mm [minutes]")};o.forEach((function(e){d.push({text:e.name,value:e.name})}));var p=[{title:"Organizer",dataIndex:"organizer",key:"organizer",valueType:"text"},{title:"Title",dataIndex:"title",key:"title"},{title:"Start Date",dataIndex:"fromDate",key:"fromDate",valueType:"date",sorter:function(e,t){return da()(e.fromDate)-da()(t.fromDate)},render:function(e,t){return da()(t.fromDate).format("YYYY-MM-DD")}},{title:"Start Date to End Date",dataIndex:"fromDate",valueType:"dateRange",key:"somehtin",hideInTable:!0,search:{transform:function(e){return{startTime:e[0],endTime:e[1]}}}},{title:"End Date",dataIndex:"toDate",key:"toDate",valueType:"date",sorter:function(e,t){return da()(e.toDate)-da()(t.toDate)},render:function(e,t){return da()(t.toDate).format("YYYY-MM-DD")}},{title:"Time",dataIndex:"time",key:"time",hideInSearch:!0,render:function(e,t){return"".concat(t.fromTime," - ").concat(t.toTime)}},{title:"Total Duration",dataIndex:"duration",key:"duration",render:function(e,t){return b(t.duration)},hideInSearch:!0},{title:"Status",dataIndex:"status",key:"status",filters:[{text:"Pending",value:"Pending"},{text:"Approved",value:"Approved"},{text:"Rejected",value:"Rejected"}],hideInSearch:!0,onFilter:function(e,t){return 0===t.status.indexOf(e)},render:function(e,t){return Object(Ta.jsx)(Ua.a,{status:"Pending"==t.status?"processing":"Approved"==t.status?"success":"error",text:t.status})}},{title:"Action",key:"_id",valueType:"option",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(U.b,{to:"/training/view/".concat(t._id),children:"View"})},t._id)}}],f=[{title:"Organizer",dataIndex:"organizer",key:"organizer",valueType:"text"},{title:"Title",dataIndex:"title",key:"title"},{title:"Start Date",dataIndex:"fromDate",key:"fromDate",valueType:"date",sorter:function(e,t){return da()(e.fromDate)-da()(t.fromDate)},render:function(e,t){return da()(t.fromDate).format("YYYY-MM-DD")}},{title:"Start Date to End Date",dataIndex:"fromDate",valueType:"dateRange",key:"somehtin",hideInTable:!0,search:{transform:function(e){return{startTime:e[0],endTime:e[1]}}}},{title:"End Date",dataIndex:"toDate",key:"toDate",valueType:"date",sorter:function(e,t){return da()(e.toDate)-da()(t.toDate)},render:function(e,t){return da()(t.toDate).format("YYYY-MM-DD")}},{title:"Time",dataIndex:"time",key:"time",hideInSearch:!0,render:function(e,t){return"".concat(t.fromTime," - ").concat(t.toTime)}},{title:"Total Duration",dataIndex:"duration",key:"duration",render:function(e,t){return b(t.duration)},hideInSearch:!0},{title:"Attendants",dataIndex:"attendants",key:"attendants",hideInSearch:!0,sorter:function(e,t){return j(e.attendants)-j(t.attendants)},render:function(e,t){return j(t.attendants)}},{title:"Action",key:"_id",valueType:"option",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(U.b,{to:"/training/view/".concat(t._id),children:"View"})},t._id)}}],O=Object(a.useRef)(),m=function(e){var t=new Array;if(e)for(var n=e.length-1;n>=0;n--)t.push(e[n]);return t},h=m(c),x=m(r);return!s&&r&&c?Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("h3",{children:"My External Training Requests"}),c&&(c.length?Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(Vr.a,{columns:p,actionRef:O,request:function(e,t,n){var a=h;return e&&Object.keys(e).length>0&&(a=a.filter((function(t){return Object.keys(e).every((function(n){if(!e[n])return!0;if("pageSize"==n||"current"==n)return!0;if("all"==e[n])return!0;var a=t[n];if("user"==n)a="".concat(t.user.first_name," ").concat(t.user.last_name);else if("department"==n)a="".concat(t.department.name);else{if("startTime"==n)return da()(t.fromDate).diff(da()(e[n]))>=0;if("endTime"==n)return da()(t.toDate).diff(da()(e[n]),"days")<=0}return!a||-1!=a.search(new RegExp(".*"+e[n]+".*","gi"))}))}))),Promise.resolve({data:a,success:!0})},rowKey:"_id",pagination:{pageSize:5,showQuickJumper:!0},search:{layout:"vertical",defaultCollapsed:!0,span:6},dateFormatter:"string",toolbar:{title:"Tips:",tooltip:"Use the search bar above or filter icons on the columns for easy record finding"},toolBarRender:function(){return[Object(Ta.jsx)(y.b,{children:Object(Ta.jsx)(M.a,{type:"primary",shape:"round",children:Object(Ta.jsx)(U.b,{to:"/training/submitExt",children:"To External Training Application"})})})]}})}),Object(Ta.jsx)("br",{})]}):Object(Ta.jsx)(q.a,{})),Object(Ta.jsx)("h3",{children:"My Attending Internal Training"}),r.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(Vr.a,{columns:f,actionRef:O,request:function(e,t,n){var a=x;return e&&Object.keys(e).length>0&&(a=a.filter((function(t){return Object.keys(e).every((function(n){if(!e[n])return!0;if("pageSize"==n||"current"==n)return!0;if("all"==e[n])return!0;var a=t[n];if("user"==n)a="".concat(t.user.first_name," ").concat(t.user.last_name);else if("department"==n)a="".concat(t.department.name);else{if("startTime"==n)return da()(t.fromDate).diff(da()(e[n]))>=0;if("endTime"==n)return da()(t.toDate).diff(da()(e[n]),"days")<=0}return!a||-1!=a.search(new RegExp(".*"+e[n]+".*","gi"))}))}))),Promise.resolve({data:a,success:!0})},rowKey:"_id",pagination:{pageSize:5,showQuickJumper:!0},dateFormatter:"string",toolbar:{title:"Tips:",tooltip:"Use the search bar above or filter icons on the columns for easy record finding"}})})}):Object(Ta.jsx)(q.a,{})]}):Object(Ta.jsx)(wa,{})},ys=n(556),vs=n(1028),gs=n(542),Ts=(n(76),n(1030)),ws=n(541),Ds=n(540),_s=(n(971),function(){JSON.parse(localStorage.getItem("profile")).result;for(var e=Object(i.c)((function(e){return e.leaves})),t=e.leaves,n=e.isLoading,r=e.leaveCount,c=Object(i.c)((function(e){return e.users})).users,s=Object(i.c)((function(e){return e.trainings})).trainingCount,o=Object(i.c)((function(e){return e.depts})).depts,l=Object(i.c)((function(e){return e.leaveTypes})).leaveTypes,u=Object(i.b)(),d=(Object(Ea.g)(),0),j=function(e,n){var a=0;return t.forEach((function(t){var r=new Date(t.fromDate);"Approved"==t.status&&t.leaveType._id==n&&r.getMonth()==da()().add(e,"months").month()&&(d=Math.max(++a,d))})),a},b=[],f=-2;f<4;f++){var O={name:da()().add(f,"months").format("MMMM")};l.forEach((function(e){var t={};t[e.name]=j(f,e._id),O=Object(p.a)(Object(p.a)({},O),t)})),b.push(O)}Object(a.useEffect)((function(){u($n()),u(function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:rn}),e.next=4,J.get("/training/count/dept");case 4:n=e.sent,a=n.data,t({type:mn,payload:a}),t({type:cn}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:sn,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),u(function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Ke}),e.next=4,J.get("/leaves/count/dept");case 4:n=e.sent,a=n.data,t({type:Lt,payload:a}),t({type:We}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:Je,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),u(Nr()),u(zr()),u(ia())}),[u]);Ts.a.Divider,c.slice(0,3);return!n&&t&&r?Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,children:"Admin Dashboard"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsx)(F.a,{bordered:!0,children:Object(Ta.jsx)(ys.a,{title:"Users Count",value:c.length,prefix:Object(Ta.jsx)(Ds.a,{})})})}),Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsx)(F.a,{bordered:!0,children:Object(Ta.jsx)(ys.a,{title:"Departments Count",value:o.length,prefix:Object(Ta.jsx)(ws.a,{})})})})]}),Object(Ta.jsx)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:24,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsxs)("div",{style:{textAlign:"right"},children:[Object(Ta.jsx)(M.a,{type:"primary",shape:"round",style:{margin:"10px"},children:Object(Ta.jsx)(U.b,{to:"/calendar",children:"View on Calendar"})}),Object(Ta.jsx)(M.a,{type:"primary",shape:"round",style:{margin:"10px"},children:Object(Ta.jsx)(U.b,{to:"/leaves/list",children:"More Details..."})})]}),Object(Ta.jsx)("h3",{children:"Leaves Taken by Month for All Employees"}),Object(Ta.jsx)(ja.a,{minHeight:300,children:Object(Ta.jsxs)(vs.a,{width:"100%",height:"100%",data:b,margin:{top:5,right:30,left:20,bottom:5},children:[Object(Ta.jsx)(ma.a,{dataKey:"name"}),Object(Ta.jsx)(Oa.a,{domain:[0,d+2],allowDecimals:!1}),Object(Ta.jsx)(ha.a,{}),Object(Ta.jsx)(va.a,{wrapperStyle:{top:0,left:70}}),l.map((function(e,t){return Object(Ta.jsx)(gs.a,{type:"monotone",dataKey:e.name,stroke:e.color,activeDot:{r:8}})}))]})})]})})}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)(P.a.Title,{level:2,children:"Overview"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsx)("b",{children:"Leaves Taken by Department:"}),Object(Ta.jsxs)(z.a,{dataSource:r,rowKey:"_id",children:[Object(Ta.jsx)(z.a.Column,{title:"Name",dataIndex:["department","name"],dataKey:["department","name"]}),Object(Ta.jsx)(z.a.Column,{title:"Leaves Taken",dataIndex:"count",dataKey:"count",defaultSortOrder:"descend",sorter:function(e,t){return e.count-t.count}})]})]})}),Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsx)("b",{children:"External Trainings Attended by Department:"}),Object(Ta.jsxs)(z.a,{dataSource:s,rowKey:"_id",children:[Object(Ta.jsx)(z.a.Column,{title:"Name",dataIndex:["department","name"],dataKey:["department","name"]}),Object(Ta.jsx)(z.a.Column,{title:"Trainings Organized",dataIndex:"count",dataKey:"count",defaultSortOrder:"descend",sorter:function(e,t){return e.count-t.count}})]})]})})]})]}):Object(Ta.jsx)(wa,{})}),Is=function(e){var t,n=e.user,r=_a()(),c=Object(i.c)((function(e){return e.leaves})),s=c.leaves,o=(c.isLoading,c.todayLeaves),l=Object(i.c)((function(e){return e.users})).users,u=Object(i.c)((function(e){return e.depts})).depts,d=Object(i.c)((function(e){return e.leaveTypes})).leaveTypes,j=wr.a.Option,b=Object(i.b)(),O=Object(Ea.g)(),m=Object(a.useState)(!0),h=Object(f.a)(m,2),x=h[0],v=h[1],g=Object(a.useState)(!1),T=Object(f.a)(g,2),w=T[0],D=T[1];Object(a.useEffect)((function(){b($n()),b(aa()),b(ia()),b(Mr(n.department._id)).then((function(){v(!1)})),"admin"==n.roles.name&&(D(!0),b(zr()))}),[b]);t=l.length?l[0].department._id:n.department._id;var _=o.filter((function(e){return e.department._id==t}));l.sort((function(e,t){return t.completedHours-e.completedHours}));var I=l.slice(0,3),k=[];l.map((function(e){"supervisor"==e.roles.name&&k.push("".concat(e.first_name," ").concat(e.last_name))}));for(var E=0,C=function(e,n){var a=0;return s.forEach((function(r){var c=new Date(r.fromDate);"Approved"==r.status&&r.department._id==t&&r.leaveType._id==n&&c.getMonth()==da()().add(e,"months").month()&&(E=Math.max(++a,E))})),a},A=[],S=-2;S<4;S++){var R={name:da()().add(S,"months").format("MMMM")};d.forEach((function(e){var t={};t[e.name]=C(S,e._id),R=Object(p.a)(Object(p.a)({},R),t)})),A.push(R)}return x?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(pr.a,{title:"Select Department to View",visible:w,footer:[Object(Ta.jsx)(M.a,{onClick:function(){return O(-1)},children:"Back"}),Object(Ta.jsx)(M.a,{form:"myForm",htmlType:"submit",children:"Submit"},"submit")],onCancel:function(){D(!1)},children:Object(Ta.jsx)(fr.a,{id:"myForm",onFinish:function(e){b(Mr(e.department)),D(!1)},children:Object(Ta.jsx)(fr.a.Item,{label:"Departments",name:"department",rules:[{required:!0}],children:Object(Ta.jsx)(wr.a,{placeholder:"Please choose a department",children:u.map((function(e){return Object(Ta.jsx)(j,{value:e._id,children:e.name},e._id)}))})})})}),Object(Ta.jsx)(P.a.Title,{level:2,children:"Department Dashboard"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsxs)(Y.b,{layout:r.md?"horizontal":"vertical",title:"Department Details",bordered:!0,contentStyle:{wordBreak:"keep-all"},column:{sm:3,xs:1},children:[Object(Ta.jsx)(Y.b.Item,{label:"Name",span:3,children:l[0].department.name}),Object(Ta.jsx)(Y.b.Item,{label:"Supervisors",span:3,children:Object(Ta.jsx)(Ja.b,{dataSource:k,renderItem:function(e){return Object(Ta.jsxs)(Ja.b.Item,{children:[Object(Ta.jsx)(P.a.Text,{mark:!0})," ",e]})}})}),Object(Ta.jsx)(Y.b.Item,{label:"No. of Staff",span:3,children:l.length})]}),"admin"==n.roles.name&&Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("br",{}),Object(Ta.jsx)(M.a,{type:"primary",onClick:function(){D(!0)},children:"Change Departments"})]})]})}),Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsx)("div",{style:{textAlign:"right"},children:Object(Ta.jsx)(M.a,{type:"primary",shape:"round",children:Object(Ta.jsx)(U.b,{to:"/leaves/list",children:"To Leaves"})})}),Object(Ta.jsx)("h4",{children:"Leaves Taken by Month for Employees in Department"}),Object(Ta.jsx)(ja.a,{minHeight:300,children:Object(Ta.jsxs)(vs.a,{width:"100%",height:"100%",data:A,margin:{top:5,right:30,left:20,bottom:5},children:[Object(Ta.jsx)(ma.a,{dataKey:"name"}),Object(Ta.jsx)(Oa.a,{domain:[0,E+2],allowDecimals:!1}),Object(Ta.jsx)(ha.a,{}),Object(Ta.jsx)(va.a,{wrapperStyle:{top:0,left:70}}),d.map((function(e,t){return Object(Ta.jsx)(gs.a,{type:"monotone",dataKey:e.name,stroke:e.color,activeDot:{r:8}})}))]})})]})})]}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)(P.a.Title,{level:2,children:"Department Overview"}),Object(Ta.jsxs)(L.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsx)("b",{children:"Currently on Leave in Department:"}),_&&(_.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:_,rowKey:"_id",children:[Object(Ta.jsx)(z.a.Column,{title:"Name",dataIndex:"name",render:function(e,t){return"".concat(t.user.first_name," ").concat(t.user.last_name)}}),Object(Ta.jsx)(z.a.Column,{title:"Leave Type",dataIndex:"leaveType",render:function(e,t){return Object(Ta.jsx)(V.a,{color:e.color,children:(n=e.code,n.charAt(0).toUpperCase()+n.slice(1))});var n}},"leaveType"),Object(Ta.jsx)(z.a.Column,{title:"Action",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(U.b,{to:"/leaves/view/".concat(t._id),children:"View"})},t._id)}},"action")]})}):Object(Ta.jsx)(q.a,{}))]})}),Object(Ta.jsx)(N.a,{className:"gutter-row",xs:24,sm:12,children:Object(Ta.jsxs)(F.a,{bordered:!0,children:[Object(Ta.jsx)("b",{children:"Top Training Hours Completed:"}),I&&(I.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:I,rowKey:"_id",children:[Object(Ta.jsx)(z.a.Column,{title:"Name",dataIndex:"name",render:function(e,t){return"".concat(t.first_name," ").concat(t.last_name)}}),Object(Ta.jsx)(z.a.Column,{title:"Hours Completed",dataIndex:"completedHours",sorter:function(e,t){return e.completedHours-t.completedHours},defaultSortOrder:"desc"},"completedHours")]})}):Object(Ta.jsx)(q.a,{}))]})})]})]})},ks=n(1052),Es=n(425),Cs=wr.a.Option,As=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(f.a)(c,2),o=s[0],l=s[1],u=Object(cc.useForm)(),d=Object(f.a)(u,1)[0],j=Object(Ea.h)().id,b=Object(i.b)(),O=Object(Ea.g)(),m=Object(i.c)((function(e){return e.depts})).depts,h=Object(i.c)((function(e){return e.policy})),x=(h.policy,h.isLoading,Object(i.c)((function(e){return e.leaveTypes})).leaveTypes),v=x.filter((function(e){return!o.includes(e._id)}));Object(a.useEffect)((function(){g()}),[]);var g=function(){var e=Object(K.a)(B.a.mark((function e(){var t,n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,b(zr());case 3:if(!j){e.next=10;break}return e.next=6,b(ia());case 6:return e.next=8,b(Zr(j));case 8:(t=e.sent)&&(n=[],a=Object(p.a)(Object(p.a)({},t),{},{lists:t.lists.map((function(e){var t=e.leavetype.map((function(e){var t=x.find((function(t){return t._id==e}));return n.push(e),{key:t._id,value:t._id,label:t.name}}));return Object(p.a)(Object(p.a)({},e),{},{leavetype:t})}))}),l(n),d.setFieldsValue(a));case 10:r(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=d.getFieldValue("lists").reduce((function(e,t){var n;return e.concat(null===(n=t.leavetype)||void 0===n?void 0:n.map((function(e){return e.key})))}),[]);l(e)};return n?Object(Ta.jsx)(Er.a,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:j?"Edit Policy":"Create Policy"}),Object(Ta.jsx)(L.a,{children:Object(Ta.jsx)(N.a,{sm:{offset:7,span:10},children:Object(Ta.jsxs)(fr.a,{style:{width:"100%"},form:d,name:"dynamic_form_nest_item",onFinish:function(e){var t,n=Object(p.a)(Object(p.a)({},e),{},{lists:e.lists.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{leavetype:e.leavetype.map((function(e){return e.key}))})}))});j?(b(function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:Mn}),n.next=4,Re(e,t);case 4:r=n.sent,c=r.data,a({type:Nn,payload:c}),a({type:qn}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:zn,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(j,n)),pr.a.success({content:"Policy updated",onOk:function(){O("/policy")}})):(b((t=n,function(){var e=Object(K.a)(B.a.mark((function e(n){var a,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:Mn}),e.next=4,c=t,J.post("/policy",c);case 4:a=e.sent,r=a.data,n({type:Ln,payload:r}),n({type:qn}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n({type:zn,error:e.t0});case 13:case"end":return e.stop()}var c}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())),pr.a.success({content:"Policy created",onOk:function(){O("/policy")}}))},autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{label:"Name",name:"name",rules:[{required:!0},function(e){var t=e.getFieldValue;return{validator:function(e,n){return t("lists")&&t("lists").length?Promise.resolve():Promise.reject("Please add Policy")}}}],children:Object(Ta.jsx)(Or.a,{placeholder:"Please enter policy name"})}),Object(Ta.jsx)(fr.a.Item,{label:"Departments",name:"departments",rules:[{required:!0}],children:Object(Ta.jsx)(wr.a,{allowClear:!0,placeholder:"Choose department",mode:"multiple",rules:[{required:!0}],children:null===m||void 0===m?void 0:m.map((function(e){return Object(Ta.jsx)(Cs,{value:e._id,children:e.name},e._id)}))})}),Object(Ta.jsx)(fr.a.List,{name:"lists",children:function(e,t){var n=t.add,a=t.remove;return Object(Ta.jsxs)(Ta.Fragment,{children:[e.map((function(e){return Object(Ta.jsxs)("div",{children:[Object(Ta.jsx)(fr.a.Item,Object(p.a)(Object(p.a)({},e),{},{label:"Leave Types",name:[e.name,"leavetype"],fieldKey:[e.fieldKey,"leavetype"],rules:[{required:!0,message:"Please choose leave type"},function(t){var n=t.getFieldValue;return{validator:function(t,a){return n(["lists",e.name,"policy"])&&n(["lists",e.name,"policy"]).length?Promise.resolve():Promise.reject("Please add Condition")}}}],children:Object(Ta.jsx)(wr.a,{allowClear:!0,placeholder:"Choose leave type",mode:"multiple",onChange:T,labelInValue:!0,optionLabelProp:"label",rules:[{required:!0}],children:null===v||void 0===v?void 0:v.map((function(e){return Object(Ta.jsx)(Cs,{value:e._id,label:e.name,children:e.name},e._id)}))})})),Object(Ta.jsx)(fr.a.Item,{name:[e.name,"stacked"],valuePropName:"checked",initialValue:!1,children:Object(Ta.jsx)(Ic.a,{children:"Stacked"})}),Object(Ta.jsx)(H.a,{style:{marginBottom:"50px"},description:"If stacked is selected, all 'After' conditions will apply cumulatively. If stacked is not selected, only the highest 'After' condition will apply",type:"info",showIcon:!0}),Object(Ta.jsx)(fr.a.List,{name:[e.name,"policy"],children:function(e,t){var n=t.add,a=t.remove;return Object(Ta.jsxs)(Ta.Fragment,{children:[e.map((function(e){return Object(Ta.jsxs)(y.b,{style:{display:"flex",flexWrap:"wrap",marginBottom:8},align:"baseline",children:[Object(Ta.jsx)(fr.a.Item,Object(p.a)(Object(p.a)({},e),{},{name:[e.name,"condition1"],fieldKey:[e.fieldKey,"condition1"],rules:[{required:!0,message:"Please choose a condition"}],children:Object(Ta.jsxs)(wr.a,{allowClear:!0,placeholder:"Choose a condition",children:[Object(Ta.jsx)(Cs,{value:"after",children:"After"}),Object(Ta.jsx)(Cs,{value:"every",children:"Every"})]})})),Object(Ta.jsx)(fr.a.Item,Object(p.a)(Object(p.a)({},e),{},{name:[e.name,"year"],fieldKey:[e.fieldKey,"year"],rules:[{required:!0,message:"Please enter year"}],children:Object(Ta.jsx)(Qr.a,{min:1,style:{width:"100%"},placeholder:"Please enter years"})})),Object(Ta.jsx)(Ta.Fragment,{children:"years, increase by "}),Object(Ta.jsx)(fr.a.Item,Object(p.a)(Object(p.a)({},e),{},{name:[e.name,"increase"],fieldKey:[e.fieldKey,"increase"],rules:[{required:!0,message:"Please enter a number"}],children:Object(Ta.jsx)(Qr.a,{min:1,style:{width:"100%"},placeholder:"Enter increase count"})})),Object(Ta.jsx)(ks.a,{onClick:function(){return a(e.name)}})]},"policy"+e.key)})),Object(Ta.jsx)(fr.a.Item,{children:Object(Ta.jsx)(M.a,{type:"dashed",onClick:function(){return n()},icon:Object(Ta.jsx)(Es.a,{}),children:"Add Condition"})})]})}}),Object(Ta.jsx)(fr.a.Item,{children:Object(Ta.jsx)(M.a,{type:"dashed",onClick:function(){return a(e.name)},block:!0,icon:Object(Ta.jsx)(ks.a,{}),children:"Remove Policy"})})]},e.key)})),Object(Ta.jsx)(fr.a.Item,{children:Object(Ta.jsx)(M.a,{type:"dashed",onClick:function(){return n()},block:!0,icon:Object(Ta.jsx)(Es.a,{}),children:"Add Policy"})})]})}}),Object(Ta.jsxs)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:[Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Ta.jsx)(M.a,{type:"secondary",htmlType:"button",onClick:function(){return O(-1)},children:"Back"})]})]})})})]})},Ss=z.a.Column,Rs=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(Ea.g)(),s=Object(i.c)((function(e){return e.policy})).policies,o=Object(i.b)();Object(a.useEffect)((function(){l()}),[]);var l=function(){var e=Object(K.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,o(function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Mn}),e.next=4,J.get("/policy");case 4:n=e.sent,a=n.data,t({type:Fn,payload:a}),t({type:qn}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:zn,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}());case 3:r(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n?Object(Ta.jsx)(Er.a,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(y.b,{style:{marginBottom:16},children:Object(Ta.jsx)(M.a,{onClick:function(){c("/policy/create")},children:"Add Policy"})}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsxs)(z.a,{dataSource:s,rowKey:"_id",children:[Object(Ta.jsx)(Ss,{title:"Name",dataIndex:"name"},"name"),Object(Ta.jsx)(Ss,{title:"Departments",dataIndex:"departments",render:function(e,t){return e.map((function(e,t){return Object(Ta.jsx)("p",{children:e.name},e._id)}))}},"departments"),Object(Ta.jsx)(Ss,{title:"Policy",dataIndex:"lists",render:function(e,t){return e.map((function(e,t){return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("b",{children:e.leavetype.map((function(e){return"".concat(e.name,", ")}))}),e.stacked?Object(Ta.jsx)("p",{children:"Stacked"}):Object(Ta.jsx)(Ta.Fragment,{}),e.policy.map((function(e,t){return Object(Ta.jsx)("p",{children:"".concat(e.condition1," ").concat(e.year," years, increase by ").concat(e.increase)},t)}))]})}))}},"lists"),Object(Ta.jsx)(Ss,{title:"Action",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/policy/edit/".concat(t._id),children:"Edit"})})})}},"action")]})}),Object(Ta.jsx)(M.a,{children:Object(Ta.jsx)(U.b,{to:"/",children:"Back"})})]})},Ps=n(352),Ls=function(){var e=Object(Ea.g)();return Object(Ta.jsx)(Ps.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:Object(Ta.jsx)(M.a,{onClick:function(){e("/")},type:"primary",children:"Back Home"})})},Ns=n(543),Fs=n(551),Ys=(n(989),oc.a.useBreakpoint),Hs=function(e){var t=e.user,n=Object(i.b)(),r=Ys(),c=Object(Ea.g)(),s=Object(a.createRef)(),o=Object(a.useState)({fromDate:da()(),toDate:da()()}),l=Object(f.a)(o,2),u=l[0],d=l[1],j=Object(a.useState)({}),b=Object(f.a)(j,2),p=(b[0],b[1],Object(i.c)((function(e){return e.leaves}))),O=p.calendar,m=p.isLoading;p.error;Object(a.useEffect)((function(){m||(r.xs?s.current.getApi().changeView("listMonth"):s.current.getApi().changeView("dayGridMonth"))}),[r]);var h=function(){var e=Object(K.a)(B.a.mark((function e(a,r,c){var s,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=da()(a.start),i=da()(a.end),0!=u.fromDate.diff(s)&&0!=u.toDate.diff(i)&&(d({fromDate:s,toDate:i}),n(ta({id:t._id,fromDate:s,toDate:i}))),r(O);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)("div",{className:"demo-app",children:Object(Ta.jsx)("div",{className:"demo-app-main",children:Object(Ta.jsx)(ga.a,{spinning:m,children:Object(Ta.jsx)(Ac.a,{ref:s,plugins:[Sc.b,Rc.a,Pc.a,Lc.a],headerToolbar:{left:"prevYear,prev,next,nextYear",center:"title",right:"today dayGridMonth,listMonth"},initialView:"dayGridMonth",dayMaxEvents:!0,weekends:!0,businessHours:{daysOfWeek:[1,2,3,4,5]},events:h,eventContent:function(e){return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("b",{children:e.timeText}),Object(Ta.jsx)("i",{children:e.event.title}),Object(Ta.jsx)("i",{children:e.event.extendedProps.emp_id})]})},eventClick:function(e){"background"!=e.event.display&&c(e.event.url)}})})})})})},Ms=function(e){return function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:vn}),t.next=4,Fe(e);case 4:return a=t.sent,r=a.data,n({type:yn,payload:r}),n({type:gn}),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(0),n({type:Tn,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},qs=function(e,t){return function(){var n=Object(K.a)(B.a.mark((function n(a){var r,c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:vn}),n.next=4,Ye(e,t);case 4:r=n.sent,c=r.data,a({type:Dn,payload:c}),a({type:gn}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:Tn,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},zs=(Or.a.TextArea,Tr.a.RangePicker,wr.a.Option,P.a.Text,function(e){e.user;var t=_a()(),n=Object(Ea.g)(),r=Object(Ea.h)().id,c=Object(i.c)((function(e){return e.trainingProgress})).trainingProgress,s=Object(a.useState)(!1),o=Object(f.a)(s,2),l=o[0],u=o[1],d=fr.a.useForm(),j=Object(f.a)(d,1)[0],b=Object(a.useState)(null),p=Object(f.a)(b,2),O=(p[0],p[1]),m=Object(i.b)();Object(a.useEffect)((function(){r&&(u(!0),m(Ms(r)).then((function(){u(!1)})))}),[m,r]);return l?Object(Ta.jsx)(Er.a,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:"Training Progress Certification Upload"}),Object(Ta.jsxs)(Y.b,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},layout:t.md?"horizontal":"vertical",children:[Object(Ta.jsx)(Y.b.Item,{label:"Name",span:3,children:"".concat(c.user.first_name," ").concat(c.user.last_name)}),Object(Ta.jsx)(Y.b.Item,{label:"Course Name",span:3,children:c.training.title}),Object(Ta.jsx)(Y.b.Item,{label:"Reason for Attending",span:3,children:c.training.description}),Object(Ta.jsx)(Y.b.Item,{label:"Training Type",span:3,children:c.training.trainingType})]}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsxs)(fr.a,{labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},form:j,name:"basic",onFinish:function(e){var t=[];O(null);var a=new FormData;if(e.upload){var s,i=Object(ka.a)(e.upload);try{var o=function(){var e=s.value;e.originFileObj?a.append("files",e.originFileObj):t.push(c.attachments.find((function(t){return t.fileId==e.uid})))};for(i.s();!(s=i.n()).done;)o()}catch(l){i.e(l)}finally{i.f()}}else r&&(t=c.attachments);a.append("status","Pending Approval"),a.append("attachments",JSON.stringify(t)),m(qs(r,a)),pr.a.success({content:"Changes saved.",onOk:function(){n("/trainingProgress/history")}})},autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{name:"upload",label:"Certifications",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},rules:[function(){return{validator:function(e,t){return 0!=(null===c||void 0===c?void 0:c.attachments.length)||0!=t.length?Promise.resolve():Promise.reject(new Error("Upload cannot be empty"))}}}],children:Object(Ta.jsx)(Dr.a.Dragger,{name:"logo",listType:"picture",beforeUpload:function(e){return!1},customRequest:function(e){e.file;var t=e.onSuccess;setTimeout((function(){t("ok")}),0)},defaultFileList:function(){var e;return r?(null===c||void 0===c||null===(e=c.attachments)||void 0===e?void 0:e.map((function(e){return{uid:e.fileId,name:e.fileName,status:"done",url:e.filePath}})))||[]:null},showUploadList:{showDownloadIcon:!0,downloadIcon:function(e){return"done"==e.status?Object(Ta.jsx)(_r.a,{}):Object(Ta.jsx)(Ta.Fragment,{})},showRemoveIcon:!0,removeIcon:function(e){return"done"==e.status?Object(Ta.jsx)(Ta.Fragment,{}):Object(Ta.jsx)(Ir.a,{})}},children:Object(Ta.jsx)(M.a,{icon:Object(Ta.jsx)(kr.a,{}),children:"Click to upload"})})}),Object(Ta.jsxs)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:[Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(Ta.jsx)(M.a,{type:"secondary",htmlType:"button",onClick:function(){return n(-1)},children:"Back"})]})]})]})}),Vs=(n(990),function(e){var t=e.user,n=_a()(),r=Object(i.c)((function(e){return e.trainingProgress})),c=r.trainingProgress,s=r.isLoading,o=Object(i.b)(),l=Object(a.useState)(!0),u=Object(f.a)(l,2),d=u[0],j=u[1],b=Object(Ea.g)(),p=Object(Ea.h)().id;Object(a.useEffect)((function(){o(Ms(p)).then((function(){return j(!1)}))}),[o,p]);return d||s?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsxs)(Y.b,{title:"Leave Info",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},layout:n.md?"horizontal":"vertical",children:[Object(Ta.jsx)(Y.b.Item,{label:"Name",span:3,children:"".concat(c.user.first_name," ").concat(c.user.last_name)}),Object(Ta.jsx)(Y.b.Item,{label:"Course Name",span:3,children:c.training.title}),Object(Ta.jsx)(Y.b.Item,{label:"Reason for Attending",span:3,children:c.training.description}),Object(Ta.jsx)(Y.b.Item,{label:"Training Type",span:3,children:c.training.trainingType}),Object(Ta.jsxs)(Y.b.Item,{label:"Training Total Duration",span:3,children:[c.training.duration," hours"]}),Object(Ta.jsx)(Y.b.Item,{label:"Supporting Documents",span:3,children:0!=c.attachments.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(Dr.a,{className:"showFiles",defaultFileList:function(){var e;return p?(null===c||void 0===c||null===(e=c.attachments)||void 0===e?void 0:e.map((function(e){return{uid:e.fileId,name:e.fileName,status:"done",url:e.filePath}})))||[]:null},showUploadList:{showDownloadIcon:!0,showRemoveIcon:!1}})}):Object(Ta.jsx)("div",{children:"None"})}),Object(Ta.jsx)(Y.b.Item,{label:"Status",span:3,children:Object(Ta.jsx)(Ua.a,{status:"Pending Approval"==c.status||"Waiting Completion"==c.status?"processing":"Approved"==c.status?"success":"error",text:c.status})})]}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsx)("br",{}),Object(Ta.jsxs)(y.b,{size:"middle",children:[Object(Ta.jsx)(M.a,{onClick:function(){return b(-1)},children:"Back"}),c.user._id!=t._id&&"Pending Approval"==c.status&&Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(M.a,{type:"success",onClick:function(){return o(qs(p,{status:e="Approved"})),void("Approved"==e&&o(Fr(c.user._id)).then((function(e){o(Hr(e._id,{completedHours:parseFloat(e.completedHours)+parseFloat(c.training.duration)}))})));var e},children:"Approve"})})]})]})}),Us=function(e){var t,n=e.user,r=Object(i.c)((function(e){return e.trainingProgress})),c=r.trainingProgresses,s=r.isLoading,o=(Object(Ea.g)(),Object(i.b)());Object(a.useEffect)((function(){var e;o((e=n._id,function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:vn}),t.next=4,He(e);case 4:return a=t.sent,r=a.data,n({type:kn,payload:r}),n({type:gn}),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(0),n({type:Tn,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()))}),[o]);var l=Object(a.useRef)(),d=[{title:"Title",dataIndex:["training","title"],key:"title"},{title:"Start Date",dataIndex:["training","fromDate"],key:"fromDate",valueType:"date",sorter:function(e,t){return da()(e.training.fromDate)-da()(t.training.fromDate)},render:function(e,t){return da()(t.training.fromDate).format("YYYY-MM-DD")}},{title:"Start Date to End Date",dataIndex:"fromDate",valueType:"dateRange",key:"somehtin",hideInTable:!0,search:{transform:function(e){return{startTime:e[0],endTime:e[1]}}}},{title:"End Date",dataIndex:["training","toDate"],key:"toDate",valueType:"date",sorter:function(e,t){return da()(e.training.toDate)-da()(t.training.toDate)},render:function(e,t){return da()(t.training.toDate).format("YYYY-MM-DD")}},{title:"Status",dataIndex:"status",key:"status",filters:[{text:"Waiting Completion",value:"Waiting Completion"},{text:"Pending Approval",value:"Pending Approval"},{text:"Approved",value:"Approved"},{text:"Rejected",value:"Rejected"}],hideInSearch:!0,onFilter:function(e,t){return 0===t.status.indexOf(e)},render:function(e,t){return Object(Ta.jsx)(Ua.a,{status:"Pending Approval"==t.status||"Waiting Completion"==t.status?"processing":"Approved"==t.status?"success":"error",text:t.status})}},{title:"Action",key:"_id",valueType:"option",render:function(e,t){return Object(Ta.jsxs)(y.b,{size:"middle",children:[Object(Ta.jsx)(U.b,{to:"/trainingProgress/view/".concat(t._id),children:"View"}),("Pending Approval"==t.status||"Waiting Completion"==t.status)&&Object(Ta.jsx)(U.b,{to:"/trainingProgress/edit/".concat(t._id),children:"Edit"})]},t._id)}}],j=function(e){var t=new Array;if(e)for(var n=e.length-1;n>=0;n--)t.push(e[n]);return t}(c);return s||!c?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("h2",{children:"My Training Progress"}),c.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(Vr.a,(t={search:{span:24},rowKey:"id",columns:d,actionRef:l,request:function(e,t,n){var a=j;return e&&Object.keys(e).length>0&&(a=a.filter((function(t){return Object.keys(e).every((function(n){if(!e[n])return!0;if("pageSize"==n||"current"==n)return!0;if("all"==e[n])return!0;var a=t[n];if("user"==n)a="".concat(t.user.first_name," ").concat(t.user.last_name);else if("department"==n)a="".concat(t.department.name);else{if("startTime"==n)return da()(t.training.fromDate).diff(da()(e[n]))>=0;if("endTime"==n)return da()(t.training.toDate).diff(da()(e[n]),"days")<=0}return!a||-1!=a.search(new RegExp(".*"+e[n]+".*","gi"))}))}))),Promise.resolve({data:a,success:!0})}},Object(Wa.a)(t,"rowKey","_id"),Object(Wa.a)(t,"pagination",{pageSize:10,showQuickJumper:!0}),Object(Wa.a)(t,"search",{labelWidth:"auto"}),Object(Wa.a)(t,"dateFormatter","string"),Object(Wa.a)(t,"toolbar",{title:"Tips:",tooltip:"Use the search bar above or filter icons on the columns for easy record finding"}),t))})}):Object(Ta.jsx)(q.a,{})]})},Gs=(P.a.Text,function(e){var t=e.user,n=Object(i.c)((function(e){return e.depts})).depts,r=Object(i.c)((function(e){return e.trainingProgress})),c=r.trainingProgresses,s=r.isLoading,o=Object(a.useState)(!1),l=Object(f.a)(o,2),d=(l[0],l[1]),j=(Object(Ea.g)(),[]),b=Object(i.b)();Object(a.useEffect)((function(){var e;d(!0),b(zr()),"admin"==t.roles.name?b(function(){var e=Object(K.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:vn}),e.next=4,J.get("/trainingProgress");case 4:n=e.sent,a=n.data,t({type:xn,payload:a}),t({type:gn}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:Tn,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()).then((function(){return d(!1)})):b((e=t.department._id,function(){var t=Object(K.a)(B.a.mark((function t(n){var a,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:vn}),t.next=4,Me(e);case 4:return a=t.sent,r=a.data,n({type:In,payload:r}),n({type:gn}),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(0),n({type:Tn,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}())).then((function(){return d(!1)}))}),[b]),"admin"==t.roles.name&&n.map((function(e){j.push({text:e.name,value:e.name})}));var p=c.filter((function(e){return e.user._id!=t._id})),O=[{title:"Employee Name",dataIndex:"user",key:"user",valueType:"text",render:function(e,t){return"".concat(e.first_name," ").concat(e.last_name)}},{title:"Department",dataIndex:["user","department","name"],key:"department",hideInSearch:!0,filters:j,onFilter:function(e,t){return 0===t.user.department.name.indexOf(e)}},{title:"Training Type",dataIndex:["training","trainingType"],key:"trainingType",filters:[{text:"Internal",value:"Internal"},{text:"External",value:"External"}],hideInSearch:!0,onFilter:function(e,t){return 0===t.training.trainingType.indexOf(e)}},{title:"Start Date",dataIndex:["training","fromDate"],key:"fromDate",valueType:"date",sorter:function(e,t){return da()(e.training.fromDate)-da()(t.training.fromDate)},render:function(e,t){return da()(t.training.fromDate).format("YYYY-MM-DD")}},{title:"Start Date to End Date",dataIndex:"fromDate",valueType:"dateRange",key:"somehtin",hideInTable:!0,search:{transform:function(e){return{startTime:e[0],endTime:e[1]}}}},{title:"End Date",dataIndex:["training","toDate"],key:"toDate",valueType:"date",sorter:function(e,t){return da()(e.training.toDate)-da()(t.training.toDate)},render:function(e,t){return da()(t.training.toDate).format("YYYY-MM-DD")}},{title:"Status",dataIndex:"status",key:"status",hideInSearch:!0,filters:[{text:"Wating Completion",value:"Waiting Completion"},{text:"Pending Approval",value:"Pending Approval"},{text:"Approved",value:"Approved"},{text:"Rejected",value:"Rejected"}],onFilter:function(e,t){return 0===t.status.indexOf(e)},render:function(e,t){return Object(Ta.jsx)(Ua.a,{status:"Pending Approval"==t.status||"Waiting Completion"==t.status?"processing":"Approved"==t.status?"success":"error",text:t.status})}},{title:"Action",key:"_id",valueType:"option",render:function(e,t){return Object(Ta.jsx)(y.b,{size:"middle",children:Object(Ta.jsx)(U.b,{to:"/trainingProgress/view/".concat(t._id),children:"View"})},t._id)}}],m=Object(a.useRef)(),h=function(e){var t=new Array;if(e)for(var n=e.length-1;n>=0;n--)t.push(e[n]);return t}(p);return s?Object(Ta.jsx)(wa,{}):Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)("h2",{children:"Employee Training Completion"}),p.length?Object(Ta.jsx)(Ta.Fragment,{children:Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(Vr.a,{columns:O,actionRef:m,request:function(e,t,n){var a=h;return e&&Object.keys(e).length>0&&(a=a.filter((function(t){return Object.keys(e).every((function(n){if(!e[n])return!0;if("pageSize"==n||"current"==n)return!0;if("all"==e[n])return!0;var a=t[n];if("user"==n)a="".concat(t.user.first_name," ").concat(t.user.last_name);else if("department"==n)a="".concat(t.department.name);else{if("startTime"==n)return da()(t.training.fromDate).diff(da()(e[n]))>=0;if("endTime"==n)return da()(t.training.toDate).diff(da()(e[n]),"days")<=0}return!a||-1!=a.search(new RegExp(".*"+e[n]+".*","gi"))}))}))),Promise.resolve({data:a,success:!0})},rowKey:"_id",pagination:{pageSize:10,showQuickJumper:!0},search:{labelWidth:"auto"},dateFormatter:"string",toolbar:{title:"Tips:",tooltip:"Use the search bar above or filter icons on the columns for easy record finding"}})})}):Object(Ta.jsx)(q.a,{})]})}),Bs=function(e){var t=e.user,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=(r[0],r[1],Object(i.b)()),s=Object(i.c)((function(e){return e.users})),o=(s.isLoading,s.error,function(){var e=Object(K.a)(B.a.mark((function e(n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(xr(t._id,{password:n.password}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(Ta.jsxs)(Ta.Fragment,{children:[Object(Ta.jsx)(P.a.Title,{level:2,style:{textAlign:"center"},children:"Change Password"}),Object(Ta.jsxs)(fr.a,{name:"basic",labelCol:{sm:{span:8}},wrapperCol:{sm:{span:8}},onFinish:o,autoComplete:"off",children:[Object(Ta.jsx)(fr.a.Item,{name:"password",label:"Password",rules:[{required:!0},{pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,}$",message:"Minimum eight characters, at least one upper case English letter, one lower case English letter, one number and one special character"}],hasFeedback:!0,children:Object(Ta.jsx)(Or.a.Password,{autoFocus:!0,placeholder:"Please enter new password"})}),Object(Ta.jsx)(fr.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0},{pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,}$",message:"Minimum eight characters, at least one upper case English letter, one lower case English letter, one number and one special character"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(Ta.jsx)(Or.a.Password,{placeholder:"Please enter password again"})}),Object(Ta.jsx)(fr.a.Item,{wrapperCol:{sm:{offset:8}},children:Object(Ta.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})},Ks=(O.a.Header,O.a.Footer,O.a.Sider,O.a.Content,function(){var e,t,n=Object(i.b)(),r=Object(a.useState)(!0),c=Object(f.a)(r,2),s=c[0],o=c[1],l=Object(a.useState)({fixSiderbar:!0,navTheme:"light",primaryColor:"#1890ff",layout:"side",contentWidth:"Fluid",splitMenus:!1}),u=Object(f.a)(l,2),d=u[0],j=(u[1],Object(a.useState)("/")),b=Object(f.a)(j,2),O=b[0],D=b[1],_=Object(a.useState)(null),I=Object(f.a)(_,2),k=I[0],E=I[1],C=Object(i.c)((function(e){return e.auth})).authData,A=null===C||void 0===C?void 0:C.result,S=Object(Ea.f)(),R=Sa,P=Object(Ea.g)(),L=function(){null===k||void 0===k||k.emit("removeUser"),n({type:st}),P("/auth")};return Object(a.useEffect)((function(){D(S.pathname);var e=null===A||void 0===A?void 0:A.token;e&&(1e3*Object(Ns.a)(e).exp<(new Date).getTime()&&(m.b.error("Session expired. Please login again"),L()))}),[S]),Object(a.useEffect)((function(){E(Object(Fs.a)("http://localhost:5000"))}),[]),Object(a.useEffect)((function(){return k&&A&&(null===k||void 0===k||k.emit("newUser",A),null===k||void 0===k||k.emit("listUser"),null===k||void 0===k||k.on("newNotification",(function(e){var t="Notification",n="",a=Object(Ta.jsx)(v.a,{});"leave"==e.content.type?(n+="/leaves/view","Pending"==e.content.status?t="Leave Request":"Approved"==e.content.status?(t="Leave Approval",a=Object(Ta.jsx)(g.a,{})):"Rejected"==e.content.status&&(t="Leave Approval",a=Object(Ta.jsx)(T.a,{}))):"training"==e.content.type&&(n+="/training/view","Pending"==e.content.status?t="Training Request":"Approved"==e.content.status?(t="Training Approval",a=Object(Ta.jsx)(g.a,{})):"Rejected"==e.content.status&&(t="Training Approval",a=Object(Ta.jsx)(T.a,{}))),h.a.open({message:t,description:"".concat(e.sender," ").concat(e.content.message),icon:a,placement:"bottomRight",duration:300,onClick:function(){P("".concat(n,"/").concat(e.content.id))}})}))),function(){null===k||void 0===k||k.off("newNotification"),null===k||void 0===k||k.disconnect()}}),[k,A]),R="supervisor"==(null===A||void 0===A||null===(e=A.roles)||void 0===e?void 0:e.name)?Fa:"admin"==(null===A||void 0===A||null===(t=A.roles)||void 0===t?void 0:t.name)?qa:Sa,Object(Ta.jsx)("div",{id:"test-pro-layout",style:{height:"100vh",background:"black"},children:Object(Ta.jsx)(w.a,Object(p.a)(Object(p.a)(Object(p.a)({title:!1,logo:function(){return!!s&&Object(Ta.jsx)(x.a,{className:"logo",src:"/INTI_Logo.png",preview:!1})},onCollapse:function(e){return o(!e)}},R),{},{location:{pathname:O},menuRender:function(e,t){return!!A&&t},menuItemRender:function(e,t){return Object(Ta.jsx)(U.b,{to:e.path||"/",children:t})},rightContentRender:function(){return Object(Ta.jsxs)(y.b,{size:"large",children:[A&&Object(Ta.jsx)(or,{user:A,socket:k}),Object(Ta.jsx)(br,{user:A,logout:L})]})},locale:"en-US"},d),{},{children:Object(Ta.jsx)("div",{className:"site-layout-background",children:Object(Ta.jsxs)(Ea.d,{children:[Object(Ta.jsx)(Ea.b,{path:"/home",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Ia,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/supervisor",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Is,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/admin",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(_s,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/leaves/home",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Aa,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/leaves/create",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Lr,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/leaves/view/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(qr,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/leaves/edit/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Lr,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/leaves/list",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Kr,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/leaves/history",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Wr,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/leaveTypes",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(yc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/leaveTypes/create",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(hc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/leaveTypes/edit/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(hc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/depts",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(rc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/depts/create",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(ic,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/depts/edit/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(ic,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/profile",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Cc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/profile/changePassword",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Bs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/users",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(dc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/users/dept",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(dc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/users/create",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(nc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/users/edit/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(nc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/users/view/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(jc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/roles",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(gc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/roles/create",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(_c,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/roles/edit/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(_c,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/calendar",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(zc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/calendar/personal",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Hs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/holidays",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Wc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/holidays/create/:year",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Qc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/holidays/edit/:year/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Qc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/training/home",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(us,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/training/create",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(bs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/training/list",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(ps,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/training/view/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(fs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/training/submitExt",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(ms,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/training/extList",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(hs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/training/history",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(xs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/trainingProgress/edit/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(zs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/trainingProgress/view/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Vs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/trainingProgress/history",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Us,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/trainingProgress/list",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Gs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/policy",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Rs,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/policy/create",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(As,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/policy/edit/:id",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(As,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/auth",element:Object(Ta.jsx)(Uc,{user:A,children:Object(Ta.jsx)(gr,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/resetPassword",element:Object(Ta.jsx)(Bc,{socket:k,user:A})}),Object(Ta.jsx)(Ea.b,{path:"/test",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(Gc,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/test2",element:Object(Ta.jsx)(Vc,{user:A,children:Object(Ta.jsx)(ls,{socket:k,user:A})})}),Object(Ta.jsx)(Ea.b,{path:"/",element:Object(Ta.jsx)(Ea.a,{to:"/auth",replace:!0})}),Object(Ta.jsx)(Ea.b,{path:"*",element:Object(Ta.jsx)(Ls,{})})]})})}))})}),Ws=n(83),Js=function(e){try{return e.response?e.response.data.message.toString():e.request?e.request.toString():e.message.toString()}catch(t){return e}},Qs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,authData:null,success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case ot:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case lt:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case ut:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case tt:return localStorage.setItem("profile",JSON.stringify(Object(p.a)({},null===t||void 0===t?void 0:t.data))),Object(p.a)(Object(p.a)({},e),{},{authData:null===t||void 0===t?void 0:t.data});case rt:return Object(p.a)(Object(p.a)({},e),{},{authData:Object(p.a)(Object(p.a)({},e.authData),{},{result:t.payload})});case ct:return Object(p.a)(Object(p.a)({},e),{},{authData:Object(p.a)(Object(p.a)({},e.authData),{},{result:Object(p.a)(Object(p.a)({},e.authData.result),{},{settings:t.payload.settings})})});case st:return localStorage.clear(),Object(p.a)(Object(p.a)({},e),{},{authData:null});case at:case nt:default:return e}},$s=Object(o.combineReducers)({leaves:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,leaves:[],calendar:[],leave:null,success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case We:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case Je:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case Qe:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case ze:return Object(p.a)(Object(p.a)({},e),{},{leaves:e.leaves.map((function(e){return e._id===t.payload._id?t.payload:e})),leave:t.payload});case Ue:return Object(p.a)(Object(p.a)({},e),{},{leave:t.payload});case Be:var n=t.payload.data.leaves.map((function(e){var t=e.leaveType;return{id:e._id,title:"".concat(e.user.first_name," ").concat(e.user.last_name," (").concat(t.code,")"),start:e.fromDate,url:"/leaves/view/".concat(e._id),end:e.toDate,extendedProps:{emp_id:e.emp_id},allDay:!0,color:t.color}}))||[],a=t.payload.data.holidays.map((function(e){return{id:e._id,title:e.title,start:e.startDate,end:e.endDate,allDay:!0,display:"background"}}))||[];return Object(p.a)(Object(p.a)({},e),{},{calendar:[].concat(Object(Ws.a)(a),Object(Ws.a)(n))});case Ge:var r=t.payload.data.leaves.map((function(e){var t=e.leaveType;return{id:e._id,title:"".concat(e.user.first_name," ").concat(e.user.last_name," (").concat(t.code,") [").concat(e.status,"]"),start:e.fromDate,url:"/leaves/view/".concat(e._id),end:e.toDate,extendedProps:{emp_id:e.emp_id},allDay:!0,color:t.color}}))||[],c=t.payload.data.holidays.map((function(e){return{id:e._id,title:e.title,start:e.startDate,end:e.endDate,allDay:!0,display:"background"}}))||[];return Object(p.a)(Object(p.a)({},e),{},{calendar:[].concat(Object(Ws.a)(c),Object(Ws.a)(r))});case Ve:return Object(p.a)(Object(p.a)({},e),{},{leaves:t.payload});case qe:return Object(p.a)(Object(p.a)({},e),{},{leaves:[].concat(Object(Ws.a)(e.leaves),[t.payload])});case $e:return Object(p.a)(Object(p.a)({},e),{},{leaves:t.payload});case Xe:return Object(p.a)(Object(p.a)({},e),{},{upcomingLeave:t.payload});case Ze:return Object(p.a)(Object(p.a)({},e),{},{leaveHistory:t.payload});case et:return Object(p.a)(Object(p.a)({},e),{},{todayLeaves:t.payload});case Lt:return Object(p.a)(Object(p.a)({},e),{},{leaveCount:t.payload});default:return e}},auth:Qs,depts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,depts:[],success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wt:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case Dt:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case _t:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case It:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case vt:return Object(p.a)(Object(p.a)({},e),{},{depts:e.depts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case Tt:return Object(p.a)(Object(p.a)({},e),{},{depts:t.payload});case yt:return Object(p.a)(Object(p.a)({},e),{},{depts:[].concat(Object(Ws.a)(e.depts),[t.payload])});case gt:return Object(p.a)(Object(p.a)({},e),{},{depts:e.depts.filter((function(e){return e._id!==t.payload}))});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[],user:null,success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case Ot:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case mt:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case ht:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case jt:return Object(p.a)(Object(p.a)({},e),{},{users:e.users.map((function(e){return e._id===t.payload._id?t.payload:e}))});case pt:return Object(p.a)(Object(p.a)({},e),{},{user:t.payload});case bt:return Object(p.a)(Object(p.a)({},e),{},{users:t.payload});case dt:return Object(p.a)(Object(p.a)({},e),{},{users:[].concat(Object(Ws.a)(e.users),[t.payload])});case xt:return Object(p.a)(Object(p.a)({},e),{},{users:t.payload});default:return e}},leaveTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,leaveTypes:[],success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case St:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case Rt:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case Nt:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case Pt:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case Et:return Object(p.a)(Object(p.a)({},e),{},{leaveTypes:e.leaveTypes.map((function(e){return e._id===t.payload._id?t.payload:e}))});case At:return Object(p.a)(Object(p.a)({},e),{},{leaveType:t.payload,isLoading:!1});case Ct:return Object(p.a)(Object(p.a)({},e),{},{leaveTypes:t.payload});case kt:return Object(p.a)(Object(p.a)({},e),{},{leaveTypes:[].concat(Object(Ws.a)(e.leaveTypes),[t.payload])});default:return e}},roles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,roles:[],success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case zt:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case Vt:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case Ut:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case Yt:return Object(p.a)(Object(p.a)({},e),{},{roles:e.roles.map((function(e){return e._id===t.payload._id?t.payload:e}))});case Mt:return Object(p.a)(Object(p.a)({},e),{},{role:t.payload});case Ht:return Object(p.a)(Object(p.a)({},e),{},{roles:t.payload});case Ft:return Object(p.a)(Object(p.a)({},e),{},{roles:[].concat(Object(Ws.a)(e.roles),[t.payload])});default:return e}},holidays:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,holidays:[],success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qt:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case $t:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case Xt:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case Zt:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case Bt:return Object(p.a)(Object(p.a)({},e),{},{holidays:Object(p.a)(Object(p.a)({},e.holidays),{},{lists:e.holidays.lists.map((function(e){return e._id===t.payload._id?t.payload:e}))})});case en:case Wt:return Object(p.a)(Object(p.a)({},e),{},{holidays:t.payload});case Jt:return Object(p.a)(Object(p.a)({},e),{},{holiday:t.payload});case Gt:return Object(p.a)(Object(p.a)({},e),{},{holidays:Object(p.a)(Object(p.a)({},e.holidays),{},{lists:[].concat(Object(Ws.a)(e.holidays.lists),[t.payload])})});case Kt:return Object(p.a)(Object(p.a)({},e),{},{holidays:t.payload});default:return e}},trainings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,trainings:[],success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rn:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case cn:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case sn:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case on:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case an:return Object(p.a)(Object(p.a)({},e),{},{training:t.payload});case nn:return Object(p.a)(Object(p.a)({},e),{},{trainings:t.payload});case tn:return Object(p.a)(Object(p.a)({},e),{},{trainings:[].concat(Object(Ws.a)(e.trainings),[t.payload])});case ln:case un:return Object(p.a)(Object(p.a)({},e),{},{training:t.payload});case dn:return Object(p.a)(Object(p.a)({},e),{},{trainings:t.payload});case jn:return Object(p.a)(Object(p.a)({},e),{},{trainings:e.trainings.map((function(e){return e._id===t.payload._id?t.payload:e})),training:t.payload});case bn:return Object(p.a)(Object(p.a)({},e),{},{extTrainings:t.payload});case pn:return Object(p.a)(Object(p.a)({},e),{},{trainingHistory:t.payload});case fn:return Object(p.a)(Object(p.a)({},e),{},{upcomingTraining:t.payload});case On:return Object(p.a)(Object(p.a)({},e),{},{trainings:t.payload});case mn:return Object(p.a)(Object(p.a)({},e),{},{trainingCount:t.payload});default:return e}},trainingProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,trainingProgresses:[],success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vn:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case gn:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case Tn:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case yn:return Object(p.a)(Object(p.a)({},e),{},{trainingProgress:t.payload});case xn:case In:case kn:return Object(p.a)(Object(p.a)({},e),{},{trainingProgresses:t.payload});case hn:return Object(p.a)(Object(p.a)({},e),{},{trainingProgresses:[].concat(Object(Ws.a)(e.trainingProgress),[t.payload])});case wn:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case Dn:case _n:return Object(p.a)(Object(p.a)({},e),{},{trainingProgress:t.payload});case En:return Object(p.a)(Object(p.a)({},e),{},{trainingProgresses:t.payload});case Cn:return Object(p.a)(Object(p.a)({},e),{},{trainingProgresses:e.trainingProgress.map((function(e){return e._id===t.payload._id?t.payload:e})),trainingProgress:t.payload});case An:return Object(p.a)(Object(p.a)({},e),{},{extTrainingProgress:t.payload});case Sn:return Object(p.a)(Object(p.a)({},e),{},{trainingProgresses:t.payload});case Rn:return Object(p.a)(Object(p.a)({},e),{},{upcomingTrainingProgress:t.payload});case Pn:return Object(p.a)(Object(p.a)({},e),{},{trainingProgresses:t.payload});default:return e}},policy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,policies:[],success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mn:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case qn:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case zn:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case Vn:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case Nn:return Object(p.a)(Object(p.a)({},e),{},{policies:e.policies.map((function(e){return e._id===t.payload._id?t.payload:e}))});case Hn:return Object(p.a)(Object(p.a)({},e),{},{policy:t.payload});case Fn:case Yn:return Object(p.a)(Object(p.a)({},e),{},{policies:t.payload});case Ln:return Object(p.a)(Object(p.a)({},e),{},{policies:[].concat(Object(Ws.a)(e.policies),[t.payload])});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isLoading:!0,notifications:[],success:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Un:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!0,error:null,success:null});case Gn:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!1});case Bn:return Object(p.a)(Object(p.a)({},e),{},{error:Js(t.error)||"",isLoading:!1});case Kn:return Object(p.a)(Object(p.a)({},e),{},{success:t.payload.success});case Wn:return Object(p.a)(Object(p.a)({},e),{},{notifications:t.payload});case Jn:return Object(p.a)(Object(p.a)({},e),{},{notifications:e.notifications.filter((function(e){return e.content.type!=t.payload.type}))});case Qn:return Object(p.a)(Object(p.a)({},e),{},{notifications:e.notifications.map((function(e){return e._id==t.payload._id?Object(p.a)(Object(p.a)({},e),{},{read:!0}):e}))});default:return e}}}),Xs=n(550),Zs=n.n(Xs),ei=(n(1008),n(1009),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ti(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ni={key:"root",storage:Zs.a},ai=Object(j.a)(ni,(function(e,t){return t.type===st&&(e=void 0),$s(e,t)})),ri=Object(o.createStore)(ai,Object(l.composeWithDevTools)(Object(o.applyMiddleware)(d.a))),ci=Object(j.b)(ri);s.a.render(Object(Ta.jsx)(i.a,{store:ri,children:Object(Ta.jsx)(b.a,{loading:null,persistor:ci,children:Object(Ta.jsx)(u.b,{locale:Gr.a,children:Object(Ta.jsx)(U.a,{children:Object(Ta.jsx)(Ks,{})})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ei?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ti(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ti(t,e)}))}}()},289:function(e,t,n){},477:function(e,t,n){},645:function(e,t,n){},764:function(e,t,n){},765:function(e,t,n){},766:function(e,t,n){},767:function(e,t,n){},768:function(e,t,n){},769:function(e,t,n){},771:function(e,t,n){},870:function(e,t,n){},871:function(e,t,n){},872:function(e,t,n){},935:function(e,t,n){},936:function(e,t,n){},937:function(e,t,n){},954:function(e,t,n){},955:function(e,t,n){},956:function(e,t,n){},959:function(e,t,n){},964:function(e,t,n){},965:function(e,t,n){},966:function(e,t,n){},968:function(e,t,n){},969:function(e,t,n){},970:function(e,t,n){},971:function(e,t,n){},989:function(e,t,n){},990:function(e,t,n){}},[[1010,1,2]]]);
//# sourceMappingURL=main.4e99c099.chunk.js.map